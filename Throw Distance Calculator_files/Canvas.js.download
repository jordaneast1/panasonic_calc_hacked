var $jscomp = $jscomp || {}; $jscomp.scope = {}; $jscomp.ASSUME_ES5 = !1; $jscomp.ASSUME_NO_NATIVE_MAP = !1; $jscomp.ASSUME_NO_NATIVE_SET = !1; $jscomp.defineProperty = $jscomp.ASSUME_ES5 || "function" == typeof Object.defineProperties ? Object.defineProperty : function (k, z, x) { k != Array.prototype && k != Object.prototype && (k[z] = x.value) }; $jscomp.getGlobal = function (k) { return "undefined" != typeof window && window === k ? k : "undefined" != typeof global && null != global ? global : k }; $jscomp.global = $jscomp.getGlobal(this);
$jscomp.polyfill = function (k, z, x, Ma) { if (z) { x = $jscomp.global; k = k.split("."); for (Ma = 0; Ma < k.length - 1; Ma++) { var u = k[Ma]; u in x || (x[u] = {}); x = x[u] } k = k[k.length - 1]; Ma = x[k]; z = z(Ma); z != Ma && null != z && $jscomp.defineProperty(x, k, { configurable: !0, writable: !0, value: z }) } }; $jscomp.polyfill("Array.prototype.fill", function (k) { return k ? k : function (z, x, k) { var u = this.length || 0; 0 > x && (x = Math.max(0, u + x)); if (null == k || k > u) k = u; k = Number(k); 0 > k && (k = Math.max(0, u + k)); for (x = Number(x || 0); x < k; x++)this[x] = z; return this } }, "es6", "es3");
var Canvas = function () {
    var k = null, z = null, x = null, Ma = null, u = null, hd = null, w = null, ia = null, q = null, da = null, t = null, Ua, id = 0, sd = 0, Na, gb, hb, ve = 0, we = 0, Wd = 0, Xd = 0, G = { m: 3, inch: 2, ft: 2 }, a, Yd = 0, Zd = 0, h = 0, Vc = 0, Dc = 0, Ca = 0, ib = 0, g = 0, Ga = 0, Hc = 0, $d = [], jb = 0, kb = 0, Pb = 0, Qb = 0, Rb = 0, Sb = 0, Tb = 0, Ub = 0, Va = 0, Wa = 0, qa = 0, Xa = 0, Ya = 0, lb = 0, mb = 0, nb = 0, ob = 0, pb = 0, Vb = 0, Wb = 0, Xb = 0, Yb = 0, Zb = 0, $b = 0, qb = 0, rb = 0, ac = 0, bc = 0, sb = 0, cc = 0, dc = 0, ec = 0, tb = 0, ub = 0, fc = 0, gc = 0, vb = 0, hc = 0, ic = 0, jc = 0, ma = 0, Za = 0, Wc = 0, Ve = 0, Xc = [], ae = 0, be = 0, ce = 0, de = 0, ee = 0, fe = 0, ge = 0, he = 0, td, Fd, b, Oe =
        0, Pe = 0, c = 0, r = 0, H = 0, S = 0, fa = 0, d = 0, wb = 0, Lc = 0, xb = 0, yb = 0, zb = 0, Ab = 0, Bb = 0, kc = 0, lc = 0, mc = 0, Cb = 0, Db = 0, nc = 0, Eb = 0, oc = 0, pc = 0, qc = 0, rc = 0, Fb = 0, Gb = 0, Hb = 0, sc = 0, tc = 0, uc = 0, vc = 0, wc = 0, Ib = 0, Jb = 0, xc = 0, yc = 0, Kb = 0, zc = 0, Ac = 0, Bc = 0, Lb = 0, Oa = 0, Pa = 0, $a = 0, Ha = 0, xa = 0, ab = 0, ya = 0, jd = 0, We = 0, bb = [], I = 0, J = 0, R = 0, ra = 0, sa = 0, F = 0, Ia = 0, Ja = 0, ud, Gd, Yc, Zc, vd, Hd, $c, ad, Id = [], Da, za, Aa, cb = [], D = [], ta = [], db = [], eb = [], Ea = [], Qa = [], Mc = [], Ec = [], ie = -20 / 45, je = -10 / 45, ke = -85 / 45, Xe = -65 / 45, Ye = -5 / 45, Ze = 15 / 45, Fc = ie, Mb = je, Jd = 0, Kd = 0, wd = 0, xd = 0, ja, Ka, na, Cc = [], L = [], ka = [],
    Ba = [], fb = [], Nc = [], Oc = [], Pc = [], La = [], T = [], la = [], Nb = [], bd, cd, Gc, $e = function () {
        var b = $("#side_block").width(), a = $("#side_block").height(); $("#side_view").attr("width", b); $("#side_view").attr("height", a); $("#front_view").attr("width", b); $("#front_view").attr("height", a); $("#three_view").attr("width", b); $("#three_view").attr("height", a); Ma = document.getElementById("side_view"); u = Ma.getContext("2d"); hd = document.getElementById("front_view"); w = hd.getContext("2d"); ia = document.getElementById("three_view"); q =
            ia.getContext("2d"); da = document.getElementById("controller"); t = da.getContext("2d"); Yd = Ma.width / 2; Zd = Ma.height / 2; Oe = hd.width / 2; Pe = hd.height / 2; hb = gb = Na = bd = Ua = !1
    }, O = $e.prototype; O.CanvasLink = function (b, a, c) { k = b; z = a; x = c }; O.CanvasInit = function () {
        GetBrowser() == _browserType.IE ? ($("#sideSliderV").on("change", af), $("#frontSliderV").on("change", bf), $("#frontSliderH").on("change", cf)) : ($("#sideSliderV").on("input", af), $("#frontSliderV").on("input", bf), $("#frontSliderH").on("input", cf)); $("#side_view").on("mousedown",
            mf); $("#side_view").on("mousemove", nf); $("#side_view").on("mouseup", yd); $("#side_view").on("mouseout", zd); $("#front_view").on("mousedown", of); $("#front_view").on("mousemove", pf); $("#front_view").on("mouseup", yd); $("#front_view").on("mouseout", zd); $("#three_view").on("mousedown", qf); $("#three_view").on("mousemove", rf); $("#three_view").on("mouseup", yd); $("#three_view").on("mouseout", zd); $("#controller").on("mousedown", sf); $("#controller").on("mousemove", tf); $("#controller").on("mouseup", df); $("#controller").on("mouseout",
                ef); $("#side_view").on("touchstart", uf); $("#side_view").on("touchmove", vf); $("#side_view").on("touchend", wf); $("#side_view").on("touchcancel", xf); $("#front_view").on("touchstart", yf); $("#front_view").on("touchmove", zf); $("#front_view").on("touchend", Af); $("#front_view").on("touchcancel", Bf); $("#three_view").on("touchstart", Cf); $("#three_view").on("touchmove", Df); $("#three_view").on("touchend", Ef); $("#three_view").on("touchcancel", Ff); $("#controller").on("touchstart", Gf); $("#controller").on("touchend",
                    df); $("#controller").on("touchcancel", ef); $('input[name="radio-three"]:radio').on("change", Hf); var b = 0, a = 0; "hidden" !== $("#frontSliderV").css("visibility") && (b = $("#frontSliderV").val(), b /= 100); "hidden" !== $("#frontSliderH").css("visibility") && (a = $("#frontSliderH").val(), a /= 100); x.SetLensShift(b, a)
    }; var mf = function (b) {
        b.preventDefault(); var c = 1 == b.which ? !0 : !1, d = document.getElementById("side_view").getBoundingClientRect().left, g = document.getElementById("side_view").getBoundingClientRect().top; d = b.clientX -
            d; b = b.clientY - g; c && Ld(d, b) && (Ua = !0, d /= a, b /= a, c = x.GetPjOrigin(), id = c.z - d, sd = b + c.y)
    }, nf = function (b) {
        b.preventDefault(); var c = document.getElementById("side_view").getBoundingClientRect().left, d = document.getElementById("side_view").getBoundingClientRect().top; c = b.clientX - c; d = b.clientY - d; Ld(c, d) ? $("#side_view").css("cursor", "pointer") : b.buttons & 1 || $("#side_view").css("cursor", "auto"); Ua && (c /= a, d /= a, b = c + id, d = sd - d, d = O.ClipPjControlY(d), $("#lock_size").prop("checked") ? kd(d, b) : (b = O.ClipPjControlZ(b), x.SetPjOriginZ(b),
            x.SetPjOriginY(d), k.NoSetAppDataCalcAndDraw()))
    }, of = function (a) { a.preventDefault(); var c = 1 == a.which ? !0 : !1, d = document.getElementById("front_view").getBoundingClientRect().left, g = document.getElementById("front_view").getBoundingClientRect().top; d = a.clientX - d; a = a.clientY - g; c && Md(d, a) && (Ua = !0, d /= b, a /= b, c = x.GetPjOrigin(), id = c.x - d, sd = a + c.y) }, pf = function (a) {
        a.preventDefault(); var c = document.getElementById("front_view").getBoundingClientRect().left, d = document.getElementById("front_view").getBoundingClientRect().top;
        c = a.clientX - c; d = a.clientY - d; Md(c, d) ? $("#front_view").css("cursor", "pointer") : a.buttons & 1 || $("#front_view").css("cursor", "auto"); Ua && (c /= b, d /= b, a = c + id, d = sd - d, a = O.ClipPjControlX(a), d = O.ClipPjControlY(d), x.SetPjOriginX(a), x.SetPjOriginY(d), k.NoSetAppDataCalcAndDraw())
    }, qf = function (b) {
        b.preventDefault(); var a = 1 == b.which ? !0 : !1, c = document.getElementById("three_view").getBoundingClientRect().left, d = document.getElementById("three_view").getBoundingClientRect().top; c = b.clientX - c; b = b.clientY - d; a && (Ua = !0, id =
            c, sd = b, Jd = c, Kd = b, wd = Fc, xd = Mb)
    }, rf = function (b) { b.preventDefault(); var a = document.getElementById("three_view").getBoundingClientRect().left, c = document.getElementById("three_view").getBoundingClientRect().top; a = b.clientX - a; b = b.clientY - c; Ua && ff(a, b) }, yd = function () { Ua = !1 }, zd = function () { Ua = !1 }, uf = function (b) {
        if (!gb && !hb) {
            var c = document.getElementById("side_view").getBoundingClientRect().left, d = document.getElementById("side_view").getBoundingClientRect().top; c = b.touches[0].clientX - c; d = b.touches[0].clientY -
                d; Ld(c, d) && (b.cancelable && b.preventDefault(), Na = !0, c /= a, d /= a, b = x.GetPjOrigin(), ve = b.z - c, we = d + b.y)
        }
    }, vf = function (b) { if (!gb && !hb) { var c = document.getElementById("side_view").getBoundingClientRect().left, d = document.getElementById("side_view").getBoundingClientRect().top; c = b.touches[0].clientX - c; d = b.touches[0].clientY - d; Na && (b.cancelable && b.preventDefault(), c /= a, d /= a, b = c + ve, d = we - d, d = O.ClipPjControlY(d), $("#lock_size").prop("checked") ? kd(d, b) : (b = O.ClipPjControlZ(b), x.SetPjOriginZ(b), x.SetPjOriginY(d), k.NoSetAppDataCalcAndDraw())) } },
        yf = function (a) { if (!Na && !hb) { var c = document.getElementById("front_view").getBoundingClientRect().left, d = document.getElementById("front_view").getBoundingClientRect().top; c = a.touches[0].clientX - c; d = a.touches[0].clientY - d; Md(c, d) && (a.cancelable && a.preventDefault(), gb = !0, c /= b, d /= b, a = x.GetPjOrigin(), Wd = a.x - c, Xd = d + a.y) } }, zf = function (a) {
            if (!Na && !hb) {
                var c = document.getElementById("front_view").getBoundingClientRect().left, d = document.getElementById("front_view").getBoundingClientRect().top; c = a.touches[0].clientX -
                    c; d = a.touches[0].clientY - d; gb && (a.cancelable && a.preventDefault(), c /= b, d /= b, a = c + Wd, d = Xd - d, a = O.ClipPjControlX(a), d = O.ClipPjControlY(d), x.SetPjOriginX(a), x.SetPjOriginY(d), k.NoSetAppDataCalcAndDraw())
            }
        }, Cf = function (b) {
            if (!Na && !gb && "top" != $('input[name="radio-three"]:checked').val()) {
                var a = document.getElementById("three_view").getBoundingClientRect().left, c = document.getElementById("three_view").getBoundingClientRect().top; a = b.touches[0].clientX - a; c = b.touches[0].clientY - c; var d = {
                    minX: 2E5, maxX: -2E5, minY: 2E5,
                    maxY: -2E5
                }; d = Q(ta, ta.length, d.minX, d.maxX, d.minY, d.maxY); d = Q(db, db.length, d.minX, d.maxX, d.minY, d.maxY); d = Q(eb, eb.length, d.minX, d.maxX, d.minY, d.maxY); d = Q(Ea, Ea.length, d.minX, d.maxX, d.minY, d.maxY); d = Q(Qa, Qa.length, d.minX, d.maxX, d.minY, d.maxY); d.minX <= a && a <= d.maxX && d.minY <= c && c <= d.maxY && (b.cancelable && b.preventDefault(), hb = !0, Jd = a, Kd = c, wd = Fc, xd = Mb)
            }
        }, Df = function (b) {
            if (!Na && !gb && "top" != $('input[name="radio-three"]:checked').val()) {
                var a = document.getElementById("three_view").getBoundingClientRect().left,
                c = document.getElementById("three_view").getBoundingClientRect().top; a = b.touches[0].clientX - a; c = b.touches[0].clientY - c; hb && (b.cancelable && b.preventDefault(), ff(a, c))
            }
        }, wf = function () { Na = !1 }, Af = function () { gb = !1 }, Ef = function () { hb = !1 }, xf = function () { Na = !1 }, Bf = function () { gb = !1 }, Ff = function () { hb = !1 }, ff = function (b, a) { b = (Jd - b) / ia.width * 4; a = (Kd - a) / ia.height * 4; if (0 != b || 0 != a) Fc = wd + b, Mb = xd + a, Fc > Ye ? Fc = Ye : Fc < ke && (Fc = ke), Mb > Ze ? Mb = Ze : Mb < Xe && (Mb = Xe); q.clearRect(0, 0, ia.width, ia.height); Qe() }, af = function () {
            gf(); var b =
                $("#sideSliderV").val(), a = k.CheckLensShiftRangeDecimalPlacesModel(); a.check && (b = z.CalcRound(b, a.advDec)); $("#frontSliderV").val(b); $("#frontCurrentValV").val(b); b = $("#sideSliderV").val(); b /= 100; a = 0; "hidden" !== $("#frontSliderH").css("visibility") && (a = $("#frontSliderH").val(), a /= 100); $("#pj_place").val() == PJ_PLACE.Ceiling && (b *= -1, a *= -1); x.SetLensShift(b, a); k.NoSetAppDataCalcAndDraw()
        }, bf = function () {
            hf(); var b = $("#frontSliderV").val(), a = k.CheckLensShiftRangeDecimalPlacesModel(); a.check && (b = z.CalcRound(b,
                a.advDec)); $("#sideSliderV").val(b); $("#sideCurrentValV").val(b); b = $("#frontSliderV").val(); b /= 100; a = 0; "hidden" !== $("#frontSliderH").css("visibility") && (a = $("#frontSliderH").val(), a /= 100); $("#pj_place").val() == PJ_PLACE.Ceiling && (b *= -1, a *= -1); x.SetLensShift(b, a); k.NoSetAppDataCalcAndDraw()
        }, cf = function () {
            jf(); var b = 0; "hidden" !== $("#frontSliderV").css("visibility") && (b = $("#frontSliderV").val(), b /= 100); var a = $("#frontSliderH").val(); a /= 100; $("#pj_place").val() == PJ_PLACE.Ceiling && (b *= -1, a *= -1); x.SetLensShift(b,
                a); k.NoSetAppDataCalcAndDraw()
        }, Hf = function () { q.clearRect(0, 0, ia.width, ia.height); Fc = ie; Mb = je; Qe() }, Ld = function (b, a) { var c = $("#simulation_type").val(), d = x.GetPjRot(); if (c == SIMULATION_TYPE.VerticalAngle && 0 < d.x) { c = Va; d = Ya; var g = Xa; var h = nb } else c == SIMULATION_TYPE.VerticalAngle && 0 > d.x ? (c = qa, d = mb, g = lb) : (c == SIMULATION_TYPE.HorizontalAngle && 0 < d.y ? (c = qa, d = vb) : (c = c == SIMULATION_TYPE.HorizontalAngle && 0 > d.y ? sb : qa, d = Ya), g = Xa), h = Wa; return c <= b && d >= b && g <= a && h >= a ? !0 : !1 }, Md = function (b, a) {
            var c = $("#simulation_type").val(),
            d = x.GetPjRot(); if (c == SIMULATION_TYPE.VerticalAngle && 0 < d.x) { c = zb; d = Bb; var g = Ab; var h = Oa } else c == SIMULATION_TYPE.VerticalAngle && 0 > d.x ? (c = Pa, d = Ha, g = $a, h = Eb) : (c == SIMULATION_TYPE.HorizontalAngle && 0 < d.y ? (c = Pa, d = Kb) : (c = c == SIMULATION_TYPE.HorizontalAngle && 0 > d.y ? Hb : Pa, d = Ha), g = $a, h = Oa); return c <= b && d >= b && g <= a && h >= a ? !0 : !1
        }, Ad = function (b, a) {
            for (var c = 0, d = Nb.length; c < d; c++) {
                if (0 == c || 3 == c) { if ($("#lock_posH").prop("checked")) continue } else if (1 == c || 4 == c) { if ($("#lock_posV").prop("checked")) continue } else if ($("#lock_dist").prop("checked")) continue;
                if (Nb[c].minX - 5 <= b && Nb[c].maxX + 5 >= b && Nb[c].minY - 5 <= a && Nb[c].maxY + 5 >= a) return c + 1
            } return 0
        }; O.ClipPjControlZ = function (b) {
            var a = x.GetRoomLength(), c = x.GetRoomHeight(), d = x.GetRoomWidth(), g = x.GetPjOrigin(), h = x.GetParamABWide(), oa = z.CalcDiagonalFromDiatanceToScreen(b, h.A, h.B), t = x.GetUserAspect(), q = z.CalcScreenSizeWidthFromScreenSizeDiagonal(oa, t.w, t.h); oa = z.CalcScreenSizeHeightFromScreenSizeDiagonal(oa, t.w, t.h); var u = x.GetMinMaxDiagonalWide(); u = z.CalcDistanceToScreenFromDiagonal(u.min, h.A, h.B); if ($("#lock_dist").prop("checked")) return b =
                g.z; c < oa && (oa = c, q = z.CalcScreenSizeWidthFromScreenSizeHeight(oa, t.w, t.h), oa = z.CalcScreenSizeDiagonalFromScreenSizeWidthAndHeight(q, oa), b = c = z.CalcDistanceToScreenFromDiagonal(oa, h.A, h.B)); d < q && (q = d, oa = z.CalcScreenSizeHeightFromScreenSizeWidth(q, t.w, t.h), oa = z.CalcScreenSizeDiagonalFromScreenSizeWidthAndHeight(q, oa), b = c = z.CalcDistanceToScreenFromDiagonal(oa, h.A, h.B)); a - b < PJ_LIMIT_Z && (b = a - PJ_LIMIT_Z); b < u && (b = u); return b
        }; O.ClipPjControlX = function (b) {
            var a = x.GetRoomWidth(), c = b; if ($("#lock_posH").prop("checked")) return c =
                x.GetPjOrigin().x; a - b < PJ_LIMIT_X && (c = a - PJ_LIMIT_X); 0 - b > -1 * PJ_LIMIT_X && (c = PJ_LIMIT_X); return c
        }; O.ClipPjControlY = function (b) { var a = x.GetRoomHeight(), c = b; if ($("#lock_posV").prop("checked")) return c = x.GetPjOrigin().y; a - b < PJ_LIMIT_Y && (c = a - PJ_LIMIT_Y); 0 - b > -1 * PJ_LIMIT_Y && (c = PJ_LIMIT_Y); return c }; var kd = function (b, a) { var c = x.GetDistanceToScreen(); a > c.max ? a = c.max : a < c.min && (a = c.min); x.SetPjOriginZ(a); x.SetPjOriginY(b); k.NoSetAppDataCalcAndDraw() }, gf = function () {
            var b = $("#sideSliderV").val(), a = k.CheckLensShiftRangeDecimalPlacesModel();
            a.check && (b = z.CalcRound(b, a.advDec)); $("#sideCurrentValV").val(b)
        }, hf = function () { var b = $("#frontSliderV").val(), a = k.CheckLensShiftRangeDecimalPlacesModel(); a.check && (b = z.CalcRound(b, a.advDec)); $("#frontCurrentValV").val(b) }, jf = function () { var b = $("#frontSliderH").val(), a = k.CheckLensShiftRangeDecimalPlacesModel(); a.check && (b = z.CalcRound(b, a.advDec)); $("#frontCurrentValH").val(b) }; O.SetLensShiftSliderMaxMinVal = function (b, a, c, d, g) {
            var h = 0; k.CheckSelectLensCalcLensShiftInitPosition() && (h = Math.floor((Math.abs(c) +
                Math.abs(d)) / 2), 0 > d && (h *= -1)); 0 == b && 0 == a ? ($("#sideSliderV").css("visibility", "hidden"), $("#frontSliderV").css("visibility", "hidden"), $("#sideCurrentValV").css("visibility", "hidden"), $("#frontCurrentValV").css("visibility", "hidden")) : ($("#sideSliderV").css("visibility", "visible"), $("#frontSliderV").css("visibility", "visible"), $("#sideCurrentValV").css("visibility", "visible"), $("#frontCurrentValV").css("visibility", "visible"), $("#sideSliderV").attr("min", b), $("#sideSliderV").attr("max", a), $("#sideSliderV").attr("step",
                    g), $("#frontSliderV").attr("min", b), $("#frontSliderV").attr("max", a), $("#frontSliderV").attr("step", g), $("#sideSliderV").val(0), $("#frontSliderV").val(0), gf(), hf()); b = h; 0 == c && 0 == d ? ($("#frontSliderH").css("visibility", "hidden"), $("#frontCurrentValH").css("visibility", "hidden")) : ($("#frontSliderH").css("visibility", "visible"), $("#frontCurrentValH").css("visibility", "visible"), $("#frontSliderH").attr("min", c), $("#frontSliderH").attr("max", d), $("#frontSliderH").attr("step", g), $("#frontSliderH").val(b),
                        jf()); 0 != h && (h /= 100, 0 > d && (h *= -1)); x.SetLensShift(0, h)
        }; O.AllDraw = function () {
            u.clearRect(0, 0, Ma.width, Ma.height); w.clearRect(0, 0, hd.width, hd.height); q.clearRect(0, 0, ia.width, ia.height); for (var t = x.GetLWall(), ha = t[0].z, le = t[0].z, me = t[0].y, ne = t[0].y, ua = 1; ua < t.length; ua++)ha < t[ua].z && (ha = t[ua].z), le > t[ua].z && (le = t[ua].z), me < t[ua].y && (me = t[ua].y), ne > t[ua].y && (ne = t[ua].y); var oa = x.GetProjectionRay(); for (ua = 0; ua < oa.length; ua++)ha < oa[ua].z && (ha = oa[ua].z), le > oa[ua].z && (le = oa[ua].z), me < oa[ua].y && (me = oa[ua].y),
                ne > oa[ua].y && (ne = oa[ua].y); var kf = (Ma.width - 220) / (ha - le), D = (Ma.height - 100) / (me - ne); a = kf > D ? D : kf; var L = x.GetRoomWidth(), If = x.GetRoomHeight(), Re = L, E = 0, Se = If, v = 0; if (0 < x.GetLensShiftPolygon()) for (var P = x.GetProjectionLensShift(), Qc = 0; Qc < P.length; Qc++)Re < P[Qc].x && (Re = P[Qc].x), E > P[Qc].x && (E = P[Qc].x), Se < P[Qc].y && (Se = P[Qc].y), v > P[Qc].y && (v = P[Qc].y); var Q = (hd.width - 300) / (Re - E), T = (hd.height - 150) / (Se - v); b = Q > T ? T : Q; var Y = x.GetLWall(); var Jf = x.GetScreenCurved(); if ($("#simulation_type").val() == SIMULATION_TYPE.VerticalCurved &&
                    0 != Jf) { var N = Y[17].z; var da = Y[17].y; ib = Yd - .5 * N * a; g = Zd + .5 * da * a; h = ib; Vc = Zd - .5 * da * a; Dc = Yd + .5 * N * a; Ca = Vc; Ga = Dc; Hc = g; for (var O = 1; 16 > O; O++)$d[O - 1] = { x: h + Y[O].z * a, y: g - Y[O].y * a }, $d[O - 1].x += 30 } else N = Y[2].z, da = Y[1].y, ib = Yd - .5 * N * a, g = Zd + .5 * da * a, h = ib, Vc = Zd - .5 * da * a, Dc = Yd + .5 * N * a, Ca = Vc, Ga = Dc, Hc = g; ib += 30; h += 30; Dc += 30; Ga += 30; var ja = x.GetPjOrigin(), e = x.GetPjBody(); ma = h + ja.z * a; Za = g - ja.y * a; $("#pj_place").val() == PJ_PLACE.Desktop ? 1 == k.CheckUltraShortFocusLens() || 1 == k.CheckRearProjectionPJ() ? (jb = h + e[0].z * a, kb = g - e[0].y * a,
                        Pb = h + e[4].z * a, Qb = g - e[4].y * a, Rb = h + e[5].z * a, Sb = g - e[5].y * a, Tb = h + e[1].z * a, Ub = g - e[1].y * a, Va = h + e[7].z * a, Wa = g - e[7].y * a, qa = h + e[4].z * a, Xa = g - e[4].y * a, Ya = h + e[0].z * a, lb = g - e[0].y * a, mb = h + e[3].z * a, nb = g - e[3].y * a, ob = h + e[2].z * a, pb = g - e[2].y * a, Vb = h + e[1].z * a, Wb = g - e[1].y * a, Xb = h + e[5].z * a, Yb = g - e[5].y * a, Zb = h + e[6].z * a, $b = g - e[6].y * a, qb = h + e[7].z * a, rb = g - e[7].y * a, ac = h + e[4].z * a, bc = g - e[4].y * a, sb = h + e[5].z * a, cc = g - e[5].y * a, dc = h + e[6].z * a, ec = g - e[6].y * a, tb = h + e[3].z * a, ub = g - e[3].y * a, fc = h + e[0].z * a, gc = g - e[0].y * a, vb = h + e[1].z * a, hc = g - e[1].y *
                        a, ic = h + e[2].z * a, jc = g - e[2].y * a) : k.CheckLShapeLens() ? (jb = h + e[5].z * a, kb = g - e[5].y * a, Pb = h + e[4].z * a, Qb = g - e[4].y * a, Rb = h + e[0].z * a, Sb = g - e[0].y * a, Tb = h + e[1].z * a, Ub = g - e[1].y * a, Va = h + e[7].z * a, Wa = g - e[7].y * a, qa = h + e[4].z * a, Xa = g - e[4].y * a, Ya = h + e[5].z * a, lb = g - e[5].y * a, mb = h + e[6].z * a, nb = g - e[6].y * a, ob = h + e[2].z * a, pb = g - e[2].y * a, Vb = h + e[1].z * a, Wb = g - e[1].y * a, Xb = h + e[0].z * a, Yb = g - e[0].y * a, Zb = h + e[3].z * a, $b = g - e[3].y * a, qb = h + e[7].z * a, rb = g - e[7].y * a, ac = h + e[4].z * a, bc = g - e[4].y * a, sb = h + e[0].z * a, cc = g - e[0].y * a, dc = h + e[3].z * a, ec = g - e[3].y * a, tb =
                            h + e[6].z * a, ub = g - e[6].y * a, fc = h + e[5].z * a, gc = g - e[5].y * a, vb = h + e[1].z * a, hc = g - e[1].y * a, ic = h + e[2].z * a, jc = g - e[2].y * a) : (jb = h + e[4].z * a, kb = g - e[4].y * a, Pb = h + e[0].z * a, Qb = g - e[0].y * a, Rb = h + e[1].z * a, Sb = g - e[1].y * a, Tb = h + e[5].z * a, Ub = g - e[5].y * a, Va = h + e[3].z * a, Wa = g - e[3].y * a, qa = h + e[0].z * a, Xa = g - e[0].y * a, Ya = h + e[4].z * a, lb = g - e[4].y * a, mb = h + e[7].z * a, nb = g - e[7].y * a, ob = h + e[6].z * a, pb = g - e[6].y * a, Vb = h + e[5].z * a, Wb = g - e[5].y * a, Xb = h + e[1].z * a, Yb = g - e[1].y * a, Zb = h + e[2].z * a, $b = g - e[2].y * a, qb = h + e[3].z * a, rb = g - e[3].y * a, ac = h + e[0].z * a, bc = g - e[0].y *
                                a, sb = h + e[1].z * a, cc = g - e[1].y * a, dc = h + e[2].z * a, ec = g - e[2].y * a, tb = h + e[7].z * a, ub = g - e[7].y * a, fc = h + e[4].z * a, gc = g - e[4].y * a, vb = h + e[5].z * a, hc = g - e[5].y * a, ic = h + e[6].z * a, jc = g - e[6].y * a) : $("#pj_place").val() == PJ_PLACE.Ceiling ? 1 == k.CheckUltraShortFocusLens() || 1 == k.CheckRearProjectionPJ() ? (jb = h + e[2].z * a, kb = g - e[2].y * a, Pb = h + e[6].z * a, Qb = g - e[6].y * a, Rb = h + e[7].z * a, Sb = g - e[7].y * a, Tb = h + e[3].z * a, Ub = g - e[3].y * a, Va = h + e[5].z * a, Wa = g - e[5].y * a, qa = h + e[6].z * a, Xa = g - e[6].y * a, Ya = h + e[2].z * a, lb = g - e[2].y * a, mb = h + e[1].z * a, nb = g - e[1].y * a, ob = h +
                                    e[0].z * a, pb = g - e[0].y * a, Vb = h + e[3].z * a, Wb = g - e[3].y * a, Xb = h + e[7].z * a, Yb = g - e[7].y * a, Zb = h + e[4].z * a, $b = g - e[4].y * a, qb = h + e[5].z * a, rb = g - e[5].y * a, ac = h + e[6].z * a, bc = g - e[6].y * a, sb = h + e[7].z * a, cc = g - e[7].y * a, dc = h + e[4].z * a, ec = g - e[4].y * a, tb = h + e[1].z * a, ub = g - e[1].y * a, fc = h + e[2].z * a, gc = g - e[2].y * a, vb = h + e[3].z * a, hc = g - e[3].y * a, ic = h + e[0].z * a, jc = g - e[0].y * a) : k.CheckLShapeLens() ? (jb = h + e[2].z * a, kb = g - e[2].y * a, Pb = h + e[3].z * a, Qb = g - e[3].y * a, Rb = h + e[7].z * a, Sb = g - e[7].y * a, Tb = h + e[6].z * a, Ub = g - e[6].y * a, Va = h + e[0].z * a, Wa = g - e[0].y * a, qa = h + e[3].z *
                                        a, Xa = g - e[3].y * a, Ya = h + e[2].z * a, lb = g - e[2].y * a, mb = h + e[1].z * a, nb = g - e[1].y * a, ob = h + e[5].z * a, pb = g - e[5].y * a, Vb = h + e[6].z * a, Wb = g - e[6].y * a, Xb = h + e[7].z * a, Yb = g - e[7].y * a, Zb = h + e[4].z * a, $b = g - e[4].y * a, qb = h + e[0].z * a, rb = g - e[0].y * a, ac = h + e[3].z * a, bc = g - e[3].y * a, sb = h + e[7].z * a, cc = g - e[7].y * a, dc = h + e[4].z * a, ec = g - e[4].y * a, tb = h + e[1].z * a, ub = g - e[1].y * a, fc = h + e[2].z * a, gc = g - e[2].y * a, vb = h + e[6].z * a, hc = g - e[6].y * a, ic = h + e[5].z * a, jc = g - e[5].y * a) : (jb = h + e[6].z * a, kb = g - e[6].y * a, Pb = h + e[2].z * a, Qb = g - e[2].y * a, Rb = h + e[3].z * a, Sb = g - e[3].y * a, Tb = h + e[7].z *
                                            a, Ub = g - e[7].y * a, Va = h + e[1].z * a, Wa = g - e[1].y * a, qa = h + e[2].z * a, Xa = g - e[2].y * a, Ya = h + e[6].z * a, lb = g - e[6].y * a, mb = h + e[5].z * a, nb = g - e[5].y * a, ob = h + e[4].z * a, pb = g - e[4].y * a, Vb = h + e[7].z * a, Wb = g - e[7].y * a, Xb = h + e[3].z * a, Yb = g - e[3].y * a, Zb = h + e[0].z * a, $b = g - e[0].y * a, qb = h + e[1].z * a, rb = g - e[1].y * a, ac = h + e[2].z * a, bc = g - e[2].y * a, sb = h + e[3].z * a, cc = g - e[3].y * a, dc = h + e[0].z * a, ec = g - e[0].y * a, tb = h + e[5].z * a, ub = g - e[5].y * a, fc = h + e[6].z * a, gc = g - e[6].y * a, vb = h + e[7].z * a, hc = g - e[7].y * a, ic = h + e[4].z * a, jc = g - e[4].y * a) : $("#pj_place").val() == PJ_PLACE.PortClock ?
                        1 == k.CheckUltraShortFocusLens() || 1 == k.CheckRearProjectionPJ() ? (jb = h + e[3].z * a, kb = g - e[3].y * a, Pb = h + e[7].z * a, Qb = g - e[7].y * a, Rb = h + e[4].z * a, Sb = g - e[4].y * a, Tb = h + e[0].z * a, Ub = g - e[0].y * a, Va = h + e[6].z * a, Wa = g - e[6].y * a, qa = h + e[7].z * a, Xa = g - e[7].y * a, Ya = h + e[3].z * a, lb = g - e[3].y * a, mb = h + e[2].z * a, nb = g - e[2].y * a, ob = h + e[1].z * a, pb = g - e[1].y * a, Vb = h + e[0].z * a, Wb = g - e[0].y * a, Xb = h + e[4].z * a, Yb = g - e[4].y * a, Zb = h + e[5].z * a, $b = g - e[5].y * a, qb = h + e[6].z * a, rb = g - e[6].y * a, ac = h + e[7].z * a, bc = g - e[7].y * a, sb = h + e[4].z * a, cc = g - e[4].y * a, dc = h + e[5].z * a, ec = g -
                            e[5].y * a, tb = h + e[2].z * a, ub = g - e[2].y * a, fc = h + e[3].z * a, gc = g - e[3].y * a, vb = h + e[0].z * a, hc = g - e[0].y * a, ic = h + e[1].z * a, jc = g - e[1].y * a) : k.CheckLShapeLens() ? (jb = h + e[6].z * a, kb = g - e[6].y * a, Pb = h + e[7].z * a, Qb = g - e[7].y * a, Rb = h + e[4].z * a, Sb = g - e[4].y * a, Tb = h + e[5].z * a, Ub = g - e[5].y * a, Va = h + e[3].z * a, Wa = g - e[3].y * a, qa = h + e[7].z * a, Xa = g - e[7].y * a, Ya = h + e[6].z * a, lb = g - e[6].y * a, mb = h + e[2].z * a, nb = g - e[2].y * a, ob = h + e[1].z * a, pb = g - e[1].y * a, Vb = h + e[5].z * a, Wb = g - e[5].y * a, Xb = h + e[4].z * a, Yb = g - e[4].y * a, Zb = h + e[0].z * a, $b = g - e[0].y * a, qb = h + e[3].z * a, rb = g - e[3].y *
                                a, ac = h + e[7].z * a, bc = g - e[7].y * a, sb = h + e[4].z * a, cc = g - e[4].y * a, dc = h + e[0].z * a, ec = g - e[0].y * a, tb = h + e[2].z * a, ub = g - e[2].y * a, fc = h + e[6].z * a, gc = g - e[6].y * a, vb = h + e[5].z * a, hc = g - e[5].y * a, ic = h + e[1].z * a, jc = g - e[1].y * a) : (jb = h + e[7].z * a, kb = g - e[7].y * a, Pb = h + e[3].z * a, Qb = g - e[3].y * a, Rb = h + e[0].z * a, Sb = g - e[0].y * a, Tb = h + e[4].z * a, Ub = g - e[4].y * a, Va = h + e[2].z * a, Wa = g - e[2].y * a, qa = h + e[3].z * a, Xa = g - e[3].y * a, Ya = h + e[7].z * a, lb = g - e[7].y * a, mb = h + e[6].z * a, nb = g - e[6].y * a, ob = h + e[5].z * a, pb = g - e[5].y * a, Vb = h + e[4].z * a, Wb = g - e[4].y * a, Xb = h + e[0].z * a, Yb = g - e[0].y *
                                    a, Zb = h + e[1].z * a, $b = g - e[1].y * a, qb = h + e[2].z * a, rb = g - e[2].y * a, ac = h + e[3].z * a, bc = g - e[3].y * a, sb = h + e[0].z * a, cc = g - e[0].y * a, dc = h + e[1].z * a, ec = g - e[1].y * a, tb = h + e[6].z * a, ub = g - e[6].y * a, fc = h + e[7].z * a, gc = g - e[7].y * a, vb = h + e[4].z * a, hc = g - e[4].y * a, ic = h + e[5].z * a, jc = g - e[5].y * a) : $("#pj_place").val() == PJ_PLACE.PortUnClock && (1 == k.CheckUltraShortFocusLens() || 1 == k.CheckRearProjectionPJ() ? (jb = h + e[1].z * a, kb = g - e[1].y * a, Pb = h + e[5].z * a, Qb = g - e[5].y * a, Rb = h + e[6].z * a, Sb = g - e[6].y * a, Tb = h + e[2].z * a, Ub = g - e[2].y * a, Va = h + e[4].z * a, Wa = g - e[4].y *
                                        a, qa = h + e[5].z * a, Xa = g - e[5].y * a, Ya = h + e[1].z * a, lb = g - e[1].y * a, mb = h + e[0].z * a, nb = g - e[0].y * a, ob = h + e[3].z * a, pb = g - e[3].y * a, Vb = h + e[2].z * a, Wb = g - e[2].y * a, Xb = h + e[6].z * a, Yb = g - e[6].y * a, Zb = h + e[7].z * a, $b = g - e[7].y * a, qb = h + e[4].z * a, rb = g - e[4].y * a, ac = h + e[5].z * a, bc = g - e[5].y * a, sb = h + e[6].z * a, cc = g - e[6].y * a, dc = h + e[7].z * a, ec = g - e[7].y * a, tb = h + e[0].z * a, ub = g - e[0].y * a, fc = h + e[1].z * a, gc = g - e[1].y * a, vb = h + e[2].z * a, hc = g - e[2].y * a, ic = h + e[3].z * a, jc = g - e[3].y * a) : k.CheckLShapeLens() ? (jb = h + e[1].z * a, kb = g - e[1].y * a, Pb = h + e[0].z * a, Qb = g - e[0].y * a, Rb =
                                            h + e[3].z * a, Sb = g - e[3].y * a, Tb = h + e[2].z * a, Ub = g - e[2].y * a, Va = h + e[4].z * a, Wa = g - e[4].y * a, qa = h + e[0].z * a, Xa = g - e[0].y * a, Ya = h + e[1].z * a, lb = g - e[1].y * a, mb = h + e[5].z * a, nb = g - e[5].y * a, ob = h + e[6].z * a, pb = g - e[6].y * a, Vb = h + e[2].z * a, Wb = g - e[2].y * a, Xb = h + e[3].z * a, Yb = g - e[3].y * a, Zb = h + e[7].z * a, $b = g - e[7].y * a, qb = h + e[4].z * a, rb = g - e[4].y * a, ac = h + e[0].z * a, bc = g - e[0].y * a, sb = h + e[3].z * a, cc = g - e[3].y * a, dc = h + e[7].z * a, ec = g - e[7].y * a, tb = h + e[5].z * a, ub = g - e[5].y * a, fc = h + e[1].z * a, gc = g - e[1].y * a, vb = h + e[2].z * a, hc = g - e[2].y * a, ic = h + e[6].z * a, jc = g - e[6].y * a) :
                                        (jb = h + e[5].z * a, kb = g - e[5].y * a, Pb = h + e[1].z * a, Qb = g - e[1].y * a, Rb = h + e[2].z * a, Sb = g - e[2].y * a, Tb = h + e[6].z * a, Ub = g - e[6].y * a, Va = h + e[0].z * a, Wa = g - e[0].y * a, qa = h + e[1].z * a, Xa = g - e[1].y * a, Ya = h + e[5].z * a, lb = g - e[5].y * a, mb = h + e[4].z * a, nb = g - e[4].y * a, ob = h + e[7].z * a, pb = g - e[7].y * a, Vb = h + e[6].z * a, Wb = g - e[6].y * a, Xb = h + e[2].z * a, Yb = g - e[2].y * a, Zb = h + e[3].z * a, $b = g - e[3].y * a, qb = h + e[0].z * a, rb = g - e[0].y * a, ac = h + e[1].z * a, bc = g - e[1].y * a, sb = h + e[2].z * a, cc = g - e[2].y * a, dc = h + e[3].z * a, ec = g - e[3].y * a, tb = h + e[4].z * a, ub = g - e[4].y * a, fc = h + e[5].z * a, gc = g - e[5].y *
                                            a, vb = h + e[6].z * a, hc = g - e[6].y * a, ic = h + e[7].z * a, jc = g - e[7].y * a)); var ka = x.GetProjectionRay(); Wc = h + ka[0].z * a; Ve = g - ka[0].y * a; for (O = 1; 33 > O; O++)Xc[O - 1] = { x: h + ka[O].z * a, y: g - ka[O].y * a }; var Z = x.GetProjection4Corner(); $("#pj_place").val() == PJ_PLACE.Desktop ? (ae = h + Z[0].z * a, be = g - Z[0].y * a, ce = h + Z[1].z * a, de = g - Z[1].y * a, ge = h + Z[2].z * a, he = g - Z[2].y * a, ee = h + Z[3].z * a, fe = g - Z[3].y * a) : $("#pj_place").val() == PJ_PLACE.Ceiling ? (ae = h + Z[2].z * a, be = g - Z[2].y * a, ce = h + Z[3].z * a, de = g - Z[3].y * a, ge = h + Z[0].z * a, he = g - Z[0].y * a, ee = h + Z[1].z * a, fe = g - Z[1].y *
                                                a) : $("#pj_place").val() == PJ_PLACE.PortClock ? (ae = h + Z[3].z * a, be = g - Z[3].y * a, ce = h + Z[0].z * a, de = g - Z[0].y * a, ge = h + Z[1].z * a, he = g - Z[1].y * a, ee = h + Z[2].z * a, fe = g - Z[2].y * a) : $("#pj_place").val() == PJ_PLACE.PortUnClock && (ae = h + Z[1].z * a, be = g - Z[1].y * a, ce = h + Z[2].z * a, de = g - Z[2].y * a, ge = h + Z[3].z * a, he = g - Z[3].y * a, ee = h + Z[0].z * a, fe = g - Z[0].y * a); var pa = x.GetDistanceToScreen(); td = h + pa.min * a; Fd = h + pa.max * a; var la = x.GetScreen(); var Da = x.GetScreenCurved(); if ($("#simulation_type").val() == SIMULATION_TYPE.HorizontalCurved && 0 != Da) {
                                                    var ta =
                                                        la[16].x; var Ba = la[16].y
                                                } else ta = la[1].x, Ba = la[1].y; fa = Oe - .5 * ta * b; d = Pe + .5 * Ba * b; c = fa; r = Pe - .5 * Ba * b; H = Oe + .5 * ta * b; S = r; wb = H; Lc = d; fa += 45; c += 45; H += 45; wb += 45; d += 0; r += 0; S += 0; Lc += 0; var Ka = x.GetPjOrigin(), f = x.GetPjBody(); jd = c + Ka.x * b; We = d - Ka.y * b; $("#pj_place").val() == PJ_PLACE.Desktop ? 1 == k.CheckUltraShortFocusLens() || 1 == k.CheckRearProjectionPJ() ? (xb = c + f[0].x * b, yb = d - f[0].y * b, zb = c + f[4].x * b, Ab = d - f[4].y * b, Bb = c + f[5].x * b, kc = d - f[5].y * b, lc = c + f[1].x * b, mc = d - f[1].y * b, Cb = c + f[3].x * b, Db = d - f[3].y * b, nc = c + f[7].x * b, Eb = d - f[7].y *
                                                    b, oc = c + f[6].x * b, pc = d - f[6].y * b, qc = c + f[2].x * b, rc = d - f[2].y * b, Fb = c + f[7].x * b, Gb = d - f[7].y * b, Hb = c + f[4].x * b, sc = d - f[4].y * b, tc = c + f[0].x * b, uc = d - f[0].y * b, vc = c + f[3].x * b, wc = d - f[3].y * b, Ib = c + f[2].x * b, Jb = d - f[2].y * b, xc = c + f[1].x * b, yc = d - f[1].y * b, Kb = c + f[5].x * b, zc = d - f[5].y * b, Ac = c + f[6].x * b, Bc = d - f[6].y * b, Lb = c + f[3].x * b, Oa = d - f[3].y * b, Pa = c + f[0].x * b, $a = d - f[0].y * b, Ha = c + f[1].x * b, xa = d - f[1].y * b, ab = c + f[2].x * b, ya = d - f[2].y * b) : k.CheckLShapeLens() ? (xb = c + f[5].x * b, yb = d - f[5].y * b, zb = c + f[4].x * b, Ab = d - f[4].y * b, Bb = c + f[0].x * b, kc = d - f[0].y * b, lc =
                                                        c + f[1].x * b, mc = d - f[1].y * b, Cb = c + f[6].x * b, Db = d - f[6].y * b, nc = c + f[7].x * b, Eb = d - f[7].y * b, oc = c + f[3].x * b, pc = d - f[3].y * b, qc = c + f[2].x * b, rc = d - f[2].y * b, Fb = c + f[7].x * b, Gb = d - f[7].y * b, Hb = c + f[4].x * b, sc = d - f[4].y * b, tc = c + f[5].x * b, uc = d - f[5].y * b, vc = c + f[6].x * b, wc = d - f[6].y * b, Ib = c + f[2].x * b, Jb = d - f[2].y * b, xc = c + f[1].x * b, yc = d - f[1].y * b, Kb = c + f[0].x * b, zc = d - f[0].y * b, Ac = c + f[3].x * b, Bc = d - f[3].y * b, Lb = c + f[6].x * b, Oa = d - f[6].y * b, Pa = c + f[5].x * b, $a = d - f[5].y * b, Ha = c + f[1].x * b, xa = d - f[1].y * b, ab = c + f[2].x * b, ya = d - f[2].y * b) : (xb = c + f[4].x * b, yb = d - f[4].y *
                                                            b, zb = c + f[0].x * b, Ab = d - f[0].y * b, Bb = c + f[1].x * b, kc = d - f[1].y * b, lc = c + f[5].x * b, mc = d - f[5].y * b, Cb = c + f[7].x * b, Db = d - f[7].y * b, nc = c + f[3].x * b, Eb = d - f[3].y * b, oc = c + f[2].x * b, pc = d - f[2].y * b, qc = c + f[6].x * b, rc = d - f[6].y * b, Fb = c + f[3].x * b, Gb = d - f[3].y * b, Hb = c + f[0].x * b, sc = d - f[0].y * b, tc = c + f[4].x * b, uc = d - f[4].y * b, vc = c + f[7].x * b, wc = d - f[7].y * b, Ib = c + f[6].x * b, Jb = d - f[6].y * b, xc = c + f[5].x * b, yc = d - f[5].y * b, Kb = c + f[1].x * b, zc = d - f[1].y * b, Ac = c + f[2].x * b, Bc = d - f[2].y * b, Lb = c + f[7].x * b, Oa = d - f[7].y * b, Pa = c + f[4].x * b, $a = d - f[4].y * b, Ha = c + f[5].x * b, xa = d - f[5].y *
                                                            b, ab = c + f[6].x * b, ya = d - f[6].y * b) : $("#pj_place").val() == PJ_PLACE.Ceiling ? 1 == k.CheckUltraShortFocusLens() || 1 == k.CheckRearProjectionPJ() ? (xb = c + f[2].x * b, yb = d - f[2].y * b, zb = c + f[6].x * b, Ab = d - f[6].y * b, Bb = c + f[7].x * b, kc = d - f[7].y * b, lc = c + f[3].x * b, mc = d - f[3].y * b, Cb = c + f[1].x * b, Db = d - f[1].y * b, nc = c + f[5].x * b, Eb = d - f[5].y * b, oc = c + f[4].x * b, pc = d - f[4].y * b, qc = c + f[0].x * b, rc = d - f[0].y * b, Fb = c + f[5].x * b, Gb = d - f[5].y * b, Hb = c + f[6].x * b, sc = d - f[6].y * b, tc = c + f[2].x * b, uc = d - f[2].y * b, vc = c + f[1].x * b, wc = d - f[1].y * b, Ib = c + f[0].x * b, Jb = d - f[0].y * b, xc = c +
                                                                f[3].x * b, yc = d - f[3].y * b, Kb = c + f[7].x * b, zc = d - f[7].y * b, Ac = c + f[4].x * b, Bc = d - f[4].y * b, Lb = c + f[1].x * b, Oa = d - f[1].y * b, Pa = c + f[2].x * b, $a = d - f[2].y * b, Ha = c + f[3].x * b, xa = d - f[3].y * b, ab = c + f[0].x * b, ya = d - f[0].y * b) : k.CheckLShapeLens() ? (xb = c + f[2].x * b, yb = d - f[2].y * b, zb = c + f[3].x * b, Ab = d - f[3].y * b, Bb = c + f[7].x * b, kc = d - f[7].y * b, lc = c + f[6].x * b, mc = d - f[6].y * b, Cb = c + f[1].x * b, Db = d - f[1].y * b, nc = c + f[0].x * b, Eb = d - f[0].y * b, oc = c + f[4].x * b, pc = d - f[4].y * b, qc = c + f[5].x * b, rc = d - f[5].y * b, Fb = c + f[0].x * b, Gb = d - f[0].y * b, Hb = c + f[3].x * b, sc = d - f[3].y * b, tc = c + f[2].x *
                                                                    b, uc = d - f[2].y * b, vc = c + f[1].x * b, wc = d - f[1].y * b, Ib = c + f[5].x * b, Jb = d - f[5].y * b, xc = c + f[6].x * b, yc = d - f[6].y * b, Kb = c + f[7].x * b, zc = d - f[7].y * b, Ac = c + f[4].x * b, Bc = d - f[4].y * b, Lb = c + f[1].x * b, Oa = d - f[1].y * b, Pa = c + f[2].x * b, $a = d - f[2].y * b, Ha = c + f[6].x * b, xa = d - f[6].y * b, ab = c + f[5].x * b, ya = d - f[5].y * b) : (xb = c + f[6].x * b, yb = d - f[6].y * b, zb = c + f[2].x * b, Ab = d - f[2].y * b, Bb = c + f[3].x * b, kc = d - f[3].y * b, lc = c + f[7].x * b, mc = d - f[7].y * b, Cb = c + f[5].x * b, Db = d - f[5].y * b, nc = c + f[1].x * b, Eb = d - f[1].y * b, oc = c + f[0].x * b, pc = d - f[0].y * b, qc = c + f[4].x * b, rc = d - f[4].y * b, Fb = c + f[1].x *
                                                                        b, Gb = d - f[1].y * b, Hb = c + f[2].x * b, sc = d - f[2].y * b, tc = c + f[6].x * b, uc = d - f[6].y * b, vc = c + f[5].x * b, wc = d - f[5].y * b, Ib = c + f[4].x * b, Jb = d - f[4].y * b, xc = c + f[7].x * b, yc = d - f[7].y * b, Kb = c + f[3].x * b, zc = d - f[3].y * b, Ac = c + f[0].x * b, Bc = d - f[0].y * b, Lb = c + f[5].x * b, Oa = d - f[5].y * b, Pa = c + f[6].x * b, $a = d - f[6].y * b, Ha = c + f[7].x * b, xa = d - f[7].y * b, ab = c + f[4].x * b, ya = d - f[4].y * b) : $("#pj_place").val() == PJ_PLACE.PortClock ? 1 == k.CheckUltraShortFocusLens() || 1 == k.CheckRearProjectionPJ() ? (xb = c + f[3].x * b, yb = d - f[3].y * b, zb = c + f[7].x * b, Ab = d - f[7].y * b, Bb = c + f[4].x * b, kc =
                                                                            d - f[4].y * b, lc = c + f[0].x * b, mc = d - f[0].y * b, Cb = c + f[2].x * b, Db = d - f[2].y * b, nc = c + f[6].x * b, Eb = d - f[6].y * b, oc = c + f[5].x * b, pc = d - f[5].y * b, qc = c + f[1].x * b, rc = d - f[1].y * b, Fb = c + f[6].x * b, Gb = d - f[6].y * b, Hb = c + f[7].x * b, sc = d - f[7].y * b, tc = c + f[3].x * b, uc = d - f[3].y * b, vc = c + f[2].x * b, wc = d - f[2].y * b, Ib = c + f[1].x * b, Jb = d - f[1].y * b, xc = c + f[0].x * b, yc = d - f[0].y * b, Kb = c + f[4].x * b, zc = d - f[4].y * b, Ac = c + f[5].x * b, Bc = d - f[5].y * b, Lb = c + f[2].x * b, Oa = d - f[2].y * b, Pa = c + f[3].x * b, $a = d - f[3].y * b, Ha = c + f[0].x * b, xa = d - f[0].y * b, ab = c + f[1].x * b, ya = d - f[1].y * b) : k.CheckLShapeLens() ?
                                                                            (xb = c + f[6].x * b, yb = d - f[6].y * b, zb = c + f[7].x * b, Ab = d - f[7].y * b, Bb = c + f[4].x * b, kc = d - f[4].y * b, lc = c + f[5].x * b, mc = d - f[5].y * b, Cb = c + f[2].x * b, Db = d - f[2].y * b, nc = c + f[3].x * b, Eb = d - f[3].y * b, oc = c + f[0].x * b, pc = d - f[0].y * b, qc = c + f[1].x * b, rc = d - f[1].y * b, Fb = c + f[3].x * b, Gb = d - f[3].y * b, Hb = c + f[7].x * b, sc = d - f[7].y * b, tc = c + f[6].x * b, uc = d - f[6].y * b, vc = c + f[2].x * b, wc = d - f[2].y * b, Ib = c + f[1].x * b, Jb = d - f[1].y * b, xc = c + f[5].x * b, yc = d - f[5].y * b, Kb = c + f[4].x * b, zc = d - f[4].y * b, Ac = c + f[0].x * b, Bc = d - f[0].y * b, Lb = c + f[2].x * b, Oa = d - f[2].y * b, Pa = c + f[6].x * b, $a = d - f[6].y *
                                                                                b, Ha = c + f[5].x * b, xa = d - f[5].y * b, ab = c + f[1].x * b, ya = d - f[1].y * b) : (xb = c + f[7].x * b, yb = d - f[7].y * b, zb = c + f[3].x * b, Ab = d - f[3].y * b, Bb = c + f[0].x * b, kc = d - f[0].y * b, lc = c + f[4].x * b, mc = d - f[4].y * b, Cb = c + f[6].x * b, Db = d - f[6].y * b, nc = c + f[2].x * b, Eb = d - f[2].y * b, oc = c + f[1].x * b, pc = d - f[1].y * b, qc = c + f[5].x * b, rc = d - f[5].y * b, Fb = c + f[2].x * b, Gb = d - f[2].y * b, Hb = c + f[3].x * b, sc = d - f[3].y * b, tc = c + f[7].x * b, uc = d - f[7].y * b, vc = c + f[6].x * b, wc = d - f[6].y * b, Ib = c + f[5].x * b, Jb = d - f[5].y * b, xc = c + f[4].x * b, yc = d - f[4].y * b, Kb = c + f[0].x * b, zc = d - f[0].y * b, Ac = c + f[1].x * b, Bc = d - f[1].y *
                                                                                    b, Lb = c + f[6].x * b, Oa = d - f[6].y * b, Pa = c + f[7].x * b, $a = d - f[7].y * b, Ha = c + f[4].x * b, xa = d - f[4].y * b, ab = c + f[5].x * b, ya = d - f[5].y * b) : $("#pj_place").val() == PJ_PLACE.PortUnClock && (1 == k.CheckUltraShortFocusLens() || 1 == k.CheckRearProjectionPJ() ? (xb = c + f[1].x * b, yb = d - f[1].y * b, zb = c + f[5].x * b, Ab = d - f[5].y * b, Bb = c + f[6].x * b, kc = d - f[6].y * b, lc = c + f[2].x * b, mc = d - f[2].y * b, Cb = c + f[0].x * b, Db = d - f[0].y * b, nc = c + f[4].x * b, Eb = d - f[4].y * b, oc = c + f[7].x * b, pc = d - f[7].y * b, qc = c + f[3].x * b, rc = d - f[3].y * b, Fb = c + f[4].x * b, Gb = d - f[4].y * b, Hb = c + f[5].x * b, sc = d - f[5].y *
                                                                                        b, tc = c + f[1].x * b, uc = d - f[1].y * b, vc = c + f[0].x * b, wc = d - f[0].y * b, Ib = c + f[3].x * b, Jb = d - f[3].y * b, xc = c + f[2].x * b, yc = d - f[2].y * b, Kb = c + f[6].x * b, zc = d - f[6].y * b, Ac = c + f[7].x * b, Bc = d - f[7].y * b, Lb = c + f[0].x * b, Oa = d - f[0].y * b, Pa = c + f[1].x * b, $a = d - f[1].y * b, Ha = c + f[2].x * b, xa = d - f[2].y * b, ab = c + f[3].x * b, ya = d - f[3].y * b) : k.CheckLShapeLens() ? (xb = c + f[1].x * b, yb = d - f[1].y * b, zb = c + f[0].x * b, Ab = d - f[0].y * b, Bb = c + f[3].x * b, kc = d - f[3].y * b, lc = c + f[2].x * b, mc = d - f[2].y * b, Cb = c + f[5].x * b, Db = d - f[5].y * b, nc = c + f[4].x * b, Eb = d - f[4].y * b, oc = c + f[7].x * b, pc = d - f[7].y * b, qc =
                                                                                            c + f[6].x * b, rc = d - f[6].y * b, Fb = c + f[4].x * b, Gb = d - f[4].y * b, Hb = c + f[0].x * b, sc = d - f[0].y * b, tc = c + f[1].x * b, uc = d - f[1].y * b, vc = c + f[5].x * b, wc = d - f[5].y * b, Ib = c + f[6].x * b, Jb = d - f[6].y * b, xc = c + f[2].x * b, yc = d - f[2].y * b, Kb = c + f[3].x * b, zc = d - f[3].y * b, Ac = c + f[7].x * b, Bc = d - f[7].y * b, Lb = c + f[5].x * b, Oa = d - f[5].y * b, Pa = c + f[1].x * b, $a = d - f[1].y * b, Ha = c + f[2].x * b, xa = d - f[2].y * b, ab = c + f[6].x * b, ya = d - f[6].y * b) : (xb = c + f[5].x * b, yb = d - f[5].y * b, zb = c + f[1].x * b, Ab = d - f[1].y * b, Bb = c + f[2].x * b, kc = d - f[2].y * b, lc = c + f[6].x * b, mc = d - f[6].y * b, Cb = c + f[4].x * b, Db = d - f[4].y *
                                                                                                b, nc = c + f[0].x * b, Eb = d - f[0].y * b, oc = c + f[3].x * b, pc = d - f[3].y * b, qc = c + f[7].x * b, rc = d - f[7].y * b, Fb = c + f[0].x * b, Gb = d - f[0].y * b, Hb = c + f[1].x * b, sc = d - f[1].y * b, tc = c + f[5].x * b, uc = d - f[5].y * b, vc = c + f[4].x * b, wc = d - f[4].y * b, Ib = c + f[7].x * b, Jb = d - f[7].y * b, xc = c + f[6].x * b, yc = d - f[6].y * b, Kb = c + f[2].x * b, zc = d - f[2].y * b, Ac = c + f[3].x * b, Bc = d - f[3].y * b, Lb = c + f[4].x * b, Oa = d - f[4].y * b, Pa = c + f[5].x * b, $a = d - f[5].y * b, Ha = c + f[6].x * b, xa = d - f[6].y * b, ab = c + f[7].x * b, ya = d - f[7].y * b)); var ea = x.GetProjectionRay(); if ($("#pj_place").val() == PJ_PLACE.Desktop) for (var M =
                                                                                                    1; 33 > M; M++)bb[M - 1] = { x: c + ea[M].x * b, y: d - ea[M].y * b }; else if ($("#pj_place").val() == PJ_PLACE.Ceiling) { for (M = 17; 33 > M; M++)bb[M - 17] = { x: c + ea[M].x * b, y: d - ea[M].y * b }; for (M = 1; 17 > M; M++)bb[M + 15] = { x: c + ea[M].x * b, y: d - ea[M].y * b } } else if ($("#pj_place").val() == PJ_PLACE.PortClock) { for (M = 25; 33 > M; M++)bb[M - 25] = { x: c + ea[M].x * b, y: d - ea[M].y * b }; for (M = 1; 25 > M; M++)bb[M + 7] = { x: c + ea[M].x * b, y: d - ea[M].y * b } } else if ($("#pj_place").val() == PJ_PLACE.PortUnClock) {
                                                                                                        for (M = 9; 33 > M; M++)bb[M - 9] = { x: c + ea[M].x * b, y: d - ea[M].y * b }; for (M = 1; 9 > M; M++)bb[M + 23] =
                                                                                                            { x: c + ea[M].x * b, y: d - ea[M].y * b }
                                                                                                    } var na = x.GetProjMinMaxWidth(), za = x.GetProjMinMaxHeight(), Aa; ud = Aa = { x: c + ea[na.minLIndex].x * b, y: d - ea[na.minLIndex].y * b }; Gd = Aa = { x: c + ea[na.minRIndex].x * b, y: d - ea[na.minRIndex].y * b }; Yc = Aa = { x: c + ea[na.maxLIndex].x * b, y: d - ea[na.maxLIndex].y * b }; Zc = Aa = { x: c + ea[na.maxRIndex].x * b, y: d - ea[na.maxRIndex].y * b }; vd = Aa = { x: c + ea[za.minUIndex].x * b, y: d - ea[za.minUIndex].y * b }; Hd = Aa = { x: c + ea[za.minBIndex].x * b, y: d - ea[za.minBIndex].y * b }; $c = Aa = { x: c + ea[za.maxUIndex].x * b, y: d - ea[za.maxUIndex].y * b }; ad = Aa =
                                                                                                        { x: c + ea[za.maxBIndex].x * b, y: d - ea[za.maxBIndex].y * b }; var aa = x.GetProjection4Corner(); $("#pj_place").val() == PJ_PLACE.Desktop ? (I = c + aa[0].x * b, J = d - aa[0].y * b, R = c + aa[1].x * b, ra = d - aa[1].y * b, Ia = c + aa[2].x * b, Ja = d - aa[2].y * b, sa = c + aa[3].x * b, F = d - aa[3].y * b) : $("#pj_place").val() == PJ_PLACE.Ceiling ? (I = c + aa[2].x * b, J = d - aa[2].y * b, R = c + aa[3].x * b, ra = d - aa[3].y * b, Ia = c + aa[0].x * b, Ja = d - aa[0].y * b, sa = c + aa[1].x * b, F = d - aa[1].y * b) : $("#pj_place").val() == PJ_PLACE.PortClock ? (I = c + aa[3].x * b, J = d - aa[3].y * b, R = c + aa[0].x * b, ra = d - aa[0].y * b, Ia = c +
                                                                                                            aa[1].x * b, Ja = d - aa[1].y * b, sa = c + aa[2].x * b, F = d - aa[2].y * b) : $("#pj_place").val() == PJ_PLACE.PortUnClock && (I = c + aa[1].x * b, J = d - aa[1].y * b, R = c + aa[2].x * b, ra = d - aa[2].y * b, Ia = c + aa[3].x * b, Ja = d - aa[3].y * b, sa = c + aa[0].x * b, F = d - aa[0].y * b); if (0 < x.GetLensShiftPolygon()) { var cb = x.GetProjectionLensShift(), Mb = []; for (M = 1; M < cb.length; M++)Mb[M - 1] = { x: c + cb[M].x * b, y: d - cb[M].y * b }; Id = Mb } u.beginPath(); u.fillStyle = "silver"; u.moveTo(td, Vc); u.lineTo(Fd, Vc); u.lineTo(Fd, g); u.lineTo(td, g); u.closePath(); u.fill(); u.strokeStyle = "black"; u.lineWidth =
                                                                                                                2; var Cc = x.GetScreenCurved(); if ($("#simulation_type").val() == SIMULATION_TYPE.VerticalCurved && 0 != Cc) { u.beginPath(); u.moveTo(ib, g); for (var db = 0; 15 > db; db++)u.lineTo($d[db].x, $d[db].y) } else u.beginPath(), u.moveTo(ib, g); u.lineTo(h, Vc); u.lineTo(Dc, Ca); u.lineTo(Ga, Hc); u.lineTo(ib, g); u.closePath(); u.stroke(); w.beginPath(); w.strokeStyle = "black"; w.lineWidth = 2; w.moveTo(fa, d); w.lineTo(c, r); w.lineTo(H, S); w.lineTo(wb, Lc); w.lineTo(fa, d); w.closePath(); w.stroke(); if (0 < x.GetLensShiftPolygon()) {
                                                                                                                    x.GetIsLensShiftArea() ?
                                                                                                                    w.strokeStyle = "rgba(255,0,0,0.5)" : w.strokeStyle = "rgba(64,64,64,0.5)"; w.beginPath(); w.moveTo(Id[0].x, Id[0].y); for (var eb = 0; eb < Id.length; eb++)w.lineTo(Id[eb].x, Id[eb].y); w.closePath(); w.stroke()
                                                                                                                } for (var Ea = 0; 31 > Ea; Ea++)u.beginPath(), u.strokeStyle = "rgb(255,255,0)", u.lineWidth = 5, u.moveTo(Xc[Ea].x, Xc[Ea].y), u.lineTo(Xc[Ea + 1].x, Xc[Ea + 1].y), u.closePath(), u.stroke(); u.beginPath(); u.strokeStyle = "rgb(255,255,0)"; u.lineWidth = 5; u.moveTo(Xc[Ea].x, Xc[Ea].y); u.lineTo(Xc[0].x, Xc[0].y); u.closePath(); u.stroke(); var Qa =
                                                                                                                    ma, Ua = Za; u.beginPath(); u.strokeStyle = "red"; u.lineWidth = .5; u.moveTo(Qa, Ua); u.lineTo(Wc, Ve); u.closePath(); u.stroke(); u.strokeStyle = "rgb(64,220,0)"; u.beginPath(); u.moveTo(Qa, Ua); u.lineTo(ae, be); u.closePath(); u.stroke(); u.beginPath(); u.moveTo(Qa, Ua); u.lineTo(ce, de); u.closePath(); u.stroke(); u.beginPath(); u.moveTo(Qa, Ua); u.lineTo(ge, he); u.closePath(); u.stroke(); u.beginPath(); u.moveTo(Qa, Ua); u.lineTo(ee, fe); u.closePath(); u.stroke(); w.beginPath(); w.strokeStyle = "rgba(192,192,0,0.5)"; w.fillStyle = "rgba(255,255,0,0.5)";
            w.moveTo(bb[0].x, bb[0].y); for (var Na = 1; 31 > Na; Na++)w.lineTo(bb[Na].x, bb[Na].y), w.lineTo(bb[Na + 1].x, bb[Na + 1].y); w.lineTo(bb[0].x, bb[0].y); w.closePath(); w.stroke(); w.fill(); if (aa.length >= 6) { var corner0X, corner0Y, corner1X, corner1Y, corner2X, corner2Y, corner3X, corner3Y, mid4X, mid4Y, mid5X, mid5Y; if ($("#pj_place").val() == PJ_PLACE.Desktop) { corner0X = aa[0].x; corner0Y = aa[0].y; corner1X = aa[1].x; corner1Y = aa[1].y; corner2X = aa[2].x; corner2Y = aa[2].y; corner3X = aa[3].x; corner3Y = aa[3].y; mid4X = aa[4].x; mid4Y = aa[4].y; mid5X = aa[5].x; mid5Y = aa[5].y } else if ($("#pj_place").val() == PJ_PLACE.Ceiling) { corner0X = aa[2].x; corner0Y = aa[2].y; corner1X = aa[3].x; corner1Y = aa[3].y; corner2X = aa[0].x; corner2Y = aa[0].y; corner3X = aa[1].x; corner3Y = aa[1].y; mid4X = aa[4].x; mid4Y = aa[4].y; mid5X = aa[5].x; mid5Y = aa[5].y } else if ($("#pj_place").val() == PJ_PLACE.PortClock) { corner0X = aa[3].x; corner0Y = aa[3].y; corner1X = aa[0].x; corner1Y = aa[0].y; corner2X = aa[1].x; corner2Y = aa[1].y; corner3X = aa[2].x; corner3Y = aa[2].y; mid4X = aa[4].x; mid4Y = aa[4].y; mid5X = aa[5].x; mid5Y = aa[5].y } else if ($("#pj_place").val() == PJ_PLACE.PortUnClock) { corner0X = aa[1].x; corner0Y = aa[1].y; corner1X = aa[2].x; corner1Y = aa[2].y; corner2X = aa[3].x; corner2Y = aa[3].y; corner3X = aa[0].x; corner3Y = aa[0].y; mid4X = aa[4].x; mid4Y = aa[4].y; mid5X = aa[5].x; mid5Y = aa[5].y } var midTopY, midTopCanvas, botEdgeY, botEdgeCanvas; if (mid4Y > mid5Y) { midTopY = mid4Y; midTopCanvas = d - mid4Y * b; botEdgeY = Math.min(corner2Y, corner3Y); botEdgeCanvas = d - botEdgeY * b } else { midTopY = mid5Y; midTopCanvas = d - mid5Y * b; botEdgeY = Math.min(corner0Y, corner1Y); botEdgeCanvas = d - botEdgeY * b } var minX = Math.min(I, R, sa, Ia); var maxX = Math.max(I, R, sa, Ia); w.beginPath(); w.strokeStyle = "rgba(0,128,255,0.8)"; w.fillStyle = "rgba(0,128,255,0.2)"; w.lineWidth = 2; w.moveTo(minX, midTopCanvas); w.lineTo(maxX, midTopCanvas); w.lineTo(maxX, botEdgeCanvas); w.lineTo(minX, botEdgeCanvas); w.lineTo(minX, midTopCanvas); w.closePath(); w.stroke(); w.fill(); var rectWidth = Math.abs(Math.max(corner0X, corner1X, corner2X, corner3X) - Math.min(corner0X, corner1X, corner2X, corner3X)) / 1E3; var rectHeight = Math.abs(midTopY - botEdgeY) / 1E3; var unitStr = $('input[name="radio_unit"]:checked').val(); if ("ft" == unitStr || "inch" == unitStr) { rectWidth = z.ConvParameterValueFromMeterToSelectUnit(rectWidth); rectHeight = z.ConvParameterValueFromMeterToSelectUnit(rectHeight) } var widthText = z.CalcRoundBySelectUnit(ROUNDING_TYPE.number, rectWidth, G[unitStr]).toFixed(2) + " " + unitStr; var heightText = z.CalcRoundBySelectUnit(ROUNDING_TYPE.number, rectHeight, G[unitStr]).toFixed(2) + " " + unitStr; w.font = "bold 14px Arial"; w.fillStyle = "rgba(0,0,139,1)"; w.strokeStyle = "white"; w.lineWidth = 3; w.textAlign = "center"; var textX = (minX + maxX) / 2; var textY = midTopCanvas - 10; w.strokeText(widthText, textX, textY); w.fillText(widthText, textX, textY); w.textAlign = "left"; var heightTextX = maxX + 10; var heightTextY = (midTopCanvas + botEdgeCanvas) / 2; w.strokeText(heightText, heightTextX, heightTextY); w.fillText(heightText, heightTextX, heightTextY) } var V = Dc; var W = Ca; var X = Dc; var ba = Ca - 15; Ra(V, W, X, ba, "black"); V = Ga; W = Hc; X = Ga; ba = Hc + 15; Ra(V, W, X, ba, "black"); V = ib; W = g; X = ib; ba = g + 15; Ra(V, W, X, ba, "black"); V = Wc; W = Vc; X = Wc; ba = Vc - 15; Ra(V, W, X, ba, "black"); k.CheckUltraShortFocusLens() ? (V = ma - (ma - qa), W = Za, X = ma - (ma - qa), ba = g + 25) : (V = td, W = g + 25, X = td, ba = g + 40, Ra(V, W, X, ba, "black"), V = Fd, W = g + 25, X = Fd, ba =
                g + 40); Ra(V, W, X, ba, "black"); k.CheckRearProjectionPJ() ? (V = ma - (ma - qa), W = Za, X = ma - (ma - qa)) : (k.CheckUltraShortFocusLens(), V = ma, W = Za, X = ma); ba = Ca - 15; Ra(V, W, X, ba, "black"); if (k.CheckRearProjectionPJ() || k.CheckUltraShortFocusLens()) V = ma, W = Za, X = ma, ba = Hc, Ra(V, W, X, ba, "silver"); V = Ga + 10; W = Hc; X = Ga + 10; ba = Za; Ra(V, W, X, ba, "black"); V = Ga + 10; W = Za; X = Ga + 10; ba = Ca; Ra(V, W, X, ba, "black"); V = Wc; W = Ca - 10; X = ma; ba = Ca - 10; Ra(V, W, X, ba, "black"); V = ma; W = Ca - 10; X = Dc; ba = Ca - 10; Ra(V, W, X, ba, "black"); V = Dc; W = Ca; X = Dc + 15; ba = Ca; Ra(V, W, X, ba, "black");
            V = Ga; W = Hc; X = Ga + 15; ba = Hc; Ra(V, W, X, ba, "black"); V = ma; W = Za; X = Ga + 15; ba = Za; Ra(V, W, X, ba, "black"); for (var gb = ma, hb = Za, Ec = ib, Fc = Za, La = u, Nb = Math.atan2(Fc - hb, Ec - gb), Mc = Math.round(Math.sqrt(Math.pow(Ec - gb, 2) + Math.pow(Fc - hb, 2)) / 2 / 2), fb = 0; fb < Mc; fb++) { var Nc = 4 * Math.cos(Nb) * fb + gb, Oc = 4 * Math.sin(Nb) * fb + hb, Pc = 2 * Math.cos(Nb) * (2 * fb + 1) + gb, cd = 2 * Math.sin(Nb) * (2 * fb + 1) + hb; La.beginPath(); La.strokeStyle = "black"; La.lineWidth = .5; La.moveTo(Nc, Oc); La.lineTo(Pc, cd); La.closePath(); La.stroke() } V = ib; W = g + 10; X = Ga; ba = Hc + 10; Ra(V, W, X, ba,
                "black"); var Gc = $("#simulation_type").val(), Ob = x.GetPjRot(), bd = x.GetScreenCurved(); if (Gc == SIMULATION_TYPE.VerticalAngle && 0 != Ob.x) {
                    var l = c; var m = r; var n = c; var p = r - 40; y(l, m, n, p, "black"); l = H; m = S; n = H; p = S - 40; y(l, m, n, p, "black"); l = c - 10; m = r; n = c - 10; p = J; y(l, m, n, p, "black"); l = c - 10; m = J; n = c - 10; p = F; y(l, m, n, p, "black"); l = c - 10; m = F; n = c - 10; p = d; y(l, m, n, p, "black"); 0 < Ob.x ? (l = I, m = J, n = I, p = S - 40, y(l, m, n, p, "black"), l = R, m = ra, n = R, p = S - 40, y(l, m, n, p, "black"), l = sa, m = F, n = sa, p = r - 15, y(l, m, n, p, "black"), l = Ia, m = Ja, n = Ia, p = r - 15, y(l, m, n, p,
                        "black")) : 0 > Ob.x && (l = I, m = J, n = I, p = r - 15, y(l, m, n, p, "black"), l = R, m = ra, n = R, p = r - 15, y(l, m, n, p, "black"), l = sa, m = F, n = sa, p = S - 40, y(l, m, n, p, "black"), l = Ia, m = Ja, n = Ia, p = S - 40, y(l, m, n, p, "black")); l = c; m = r; n = c - 15; p = r; y(l, m, n, p, "black"); l = fa; m = d; n = fa - 15; p = d; y(l, m, n, p, "black"); l = I; m = J; n = c - 15; p = J; y(l, m, n, p, "black"); l = sa; m = F; n = fa - 15; p = F; y(l, m, n, p, "black"); 0 < Ob.x ? (l = c, m = r - 40 + 10, n = I, p = r - 40 + 10, y(l, m, n, p, "black"), l = I, m = r - 40 + 10, n = R, p = r - 40 + 10, y(l, m, n, p, "black"), l = R, m = r - 40 + 10, n = H, p = r - 40 + 10, y(l, m, n, p, "black"), l = sa, m = r - 15 + 5, n = Ia,
                            p = r - 15 + 5, y(l, m, n, p, "black")) : 0 > Ob.x && (l = c, m = r - 40 + 10, n = sa, p = r - 40 + 10, y(l, m, n, p, "black"), l = sa, m = r - 40 + 10, n = Ia, p = r - 40 + 10, y(l, m, n, p, "black"), l = Ia, m = r - 40 + 10, n = H, p = r - 40 + 10, y(l, m, n, p, "black"), l = I, m = r - 15 + 5, n = R, p = r - 15 + 5, y(l, m, n, p, "black"))
                } else Gc == SIMULATION_TYPE.HorizontalAngle && 0 != Ob.y ? (l = c, m = r, n = c, p = r - 15, y(l, m, n, p, "black"), l = H, m = S, n = H, p = S - 15, y(l, m, n, p, "black"), l = I, m = J, n = I, p = r - 15, y(l, m, n, p, "black"), l = R, m = ra, n = R, p = S - 15, y(l, m, n, p, "black"), 0 < Ob.y ? (l = c - 90 + 10, m = r, n = c - 90 + 10, p = ra, y(l, m, n, p, "black"), l = c - 90 + 10, m =
                    ra, n = c - 90 + 10, p = Ja, y(l, m, n, p, "black"), l = c - 90 + 10, m = Ja, n = c - 90 + 10, p = d, y(l, m, n, p, "black"), l = c - 15 + 5, m = J, n = c - 15 + 5, p = F, y(l, m, n, p, "black")) : 0 > Ob.y && (l = c - 90 + 10, m = r, n = c - 90 + 10, p = J, y(l, m, n, p, "black"), l = c - 90 + 10, m = J, n = c - 90 + 10, p = F, y(l, m, n, p, "black"), l = c - 90 + 10, m = F, n = c - 90 + 10, p = d, y(l, m, n, p, "black"), l = c - 15 + 5, m = ra, n = c - 15 + 5, p = Ja, y(l, m, n, p, "black")), l = c, m = r, n = c - 90, p = r, y(l, m, n, p, "black"), l = fa, m = d, n = fa - 90, p = d, y(l, m, n, p, "black"), l = c, m = r - 10, n = I, p = r - 10, y(l, m, n, p, "black"), l = I, m = r - 10, n = R, p = r - 10, y(l, m, n, p, "black"), l = R, m = r - 10, n =
                    H, p = r - 10, y(l, m, n, p, "black"), 0 < Ob.y ? (l = R, m = ra, n = c - 90, p = ra, y(l, m, n, p, "black"), l = Ia, m = Ja, n = c - 90, p = Ja, y(l, m, n, p, "black"), l = I, m = J, n = c - 15, p = J, y(l, m, n, p, "black"), l = sa, m = F, n = c - 15, p = F, y(l, m, n, p, "black")) : 0 > Ob.y && (l = I, m = J, n = c - 90, p = J, y(l, m, n, p, "black"), l = sa, m = F, n = c - 90, p = F, y(l, m, n, p, "black"), l = R, m = ra, n = c - 15, p = ra, y(l, m, n, p, "black"), l = Ia, m = Ja, n = c - 15, p = Ja, y(l, m, n, p, "black"))) : (Gc == SIMULATION_TYPE.VerticalCurved && 0 != bd ? (l = c, m = r, n = c, p = r - 40, y(l, m, n, p, "black"), l = H, m = S, n = H, p = S - 40, y(l, m, n, p, "black"), l = c - 10, m = r, n = c - 10,
                        p = J, y(l, m, n, p, "black"), l = c - 10, m = J, n = c - 10, p = F, y(l, m, n, p, "black"), l = c - 10, m = F, n = c - 10, p = d, y(l, m, n, p, "black"), l = ud.x, m = ud.y, n = ud.x, p = r - 15, y(l, m, n, p, "black"), l = Gd.x, m = Gd.y, n = Gd.x, p = r - 15, y(l, m, n, p, "black"), l = Yc.x, m = Yc.y, n = Yc.x, p = S - 40, y(l, m, n, p, "black"), l = Zc.x, m = Zc.y, n = Zc.x, p = S - 40, y(l, m, n, p, "black"), l = c, m = r, n = c - 15, p = r, y(l, m, n, p, "black"), l = fa, m = d, n = fa - 15, p = d, y(l, m, n, p, "black"), l = I, m = J, n = c - 15, p = J, y(l, m, n, p, "black"), l = sa, m = F, n = fa - 15, p = F, y(l, m, n, p, "black"), l = ud.x, m = r - 15 + 5, n = Gd.x, p = r - 15 + 5, y(l, m, n, p, "black"), l =
                        c, m = r - 40 + 10, n = Yc.x, p = r - 40 + 10, y(l, m, n, p, "black"), l = Yc.x, m = r - 40 + 10, n = Zc.x, p = r - 40 + 10, y(l, m, n, p, "black"), l = Zc.x, m = r - 40 + 10, n = H, p = r - 40 + 10) : Gc == SIMULATION_TYPE.HorizontalCurved && 0 != bd ? (l = c, m = r, n = c, p = r - 15, y(l, m, n, p, "black"), l = H, m = S, n = H, p = S - 15, y(l, m, n, p, "black"), l = I, m = J, n = I, p = r - 15, y(l, m, n, p, "black"), l = R, m = ra, n = R, p = S - 15, y(l, m, n, p, "black"), l = c - 90 + 10, m = r, n = c - 90 + 10, p = $c.y, y(l, m, n, p, "black"), l = c - 90 + 10, m = $c.y, n = c - 90 + 10, p = ad.y, y(l, m, n, p, "black"), l = c - 90 + 10, m = ad.y, n = c - 90 + 10, p = d, y(l, m, n, p, "black"), l = c - 15 + 5, m = vd.y, n =
                            c - 15 + 5, p = Hd.y, y(l, m, n, p, "black"), l = c, m = r, n = c - 90, p = r, y(l, m, n, p, "black"), l = fa, m = d, n = fa - 90, p = d, y(l, m, n, p, "black"), l = c, m = r - 10, n = I, p = r - 10, y(l, m, n, p, "black"), l = I, m = r - 10, n = R, p = r - 10, y(l, m, n, p, "black"), l = R, m = r - 10, n = H, p = r - 10, y(l, m, n, p, "black"), l = vd.x, m = vd.y, n = c - 15, p = vd.y, y(l, m, n, p, "black"), l = Hd.x, m = Hd.y, n = c - 15, p = Hd.y, y(l, m, n, p, "black"), l = $c.x, m = $c.y, n = c - 90, p = $c.y, y(l, m, n, p, "black"), l = ad.x, m = ad.y, n = c - 90, p = ad.y) : (l = c, m = r, n = c, p = r - 15, y(l, m, n, p, "black"), l = H, m = S, n = H, p = S - 15, y(l, m, n, p, "black"), l = I, m = J, n = I, p = r - 15, y(l,
                                m, n, p, "black"), l = R, m = ra, n = R, p = S - 15, y(l, m, n, p, "black"), l = c - 10, m = r, n = c - 10, p = J, y(l, m, n, p, "black"), l = c - 10, m = J, n = c - 10, p = F, y(l, m, n, p, "black"), l = c - 10, m = F, n = c - 10, p = d, y(l, m, n, p, "black"), l = c, m = r, n = c - 15, p = r, y(l, m, n, p, "black"), l = fa, m = d, n = fa - 15, p = d, y(l, m, n, p, "black"), l = I, m = J, n = c - 15, p = J, y(l, m, n, p, "black"), l = sa, m = F, n = fa - 15, p = F, y(l, m, n, p, "black"), l = c, m = r - 10, n = I, p = r - 10, y(l, m, n, p, "black"), l = I, m = r - 10, n = R, p = r - 10, y(l, m, n, p, "black"), l = R, m = r - 10, n = H, p = r - 10), y(l, m, n, p, "black")); if (1 == k.CheckRearProjectionPJ() && 0 == Ob.x && 0 ==
                                    Ob.y || 1 == k.CheckUltraShortFocusLens() && 0 == Ob.x && 0 == Ob.y) { var id = $("#model_name").val(); if ("PT-CMZ50" == id || "PT-CMZ50J" == id) $("#pj_place").val() == PJ_PLACE.Desktop ? (l = Ha, m = xa, n = H + 5, p = xa, y(l, m, n, p, "black")) : $("#pj_place").val() == PJ_PLACE.Ceiling && (l = ab, m = ya, n = H + 5, p = ya, y(l, m, n, p, "black")); else if ($("#pj_place").val() == PJ_PLACE.Desktop || $("#pj_place").val() == PJ_PLACE.Ceiling) l = Ha, m = xa, n = H + 5, p = xa, y(l, m, n, p, "black"), l = ab, m = ya, n = H + 5, p = ya, y(l, m, n, p, "black") } l = wb; m = Lc; n = wb; p = Lc + 40; y(l, m, n, p, "black"); l = fa; m =
                                        d; n = fa; p = d + 40; y(l, m, n, p, "black"); l = jd; m = We; n = jd; p = d + 15; y(l, m, n, p, "black"); l = wb + 10; m = Lc; n = wb + 10; p = S; y(l, m, n, p, "black"); l = fa; m = d + 10; n = jd; p = d + 10; y(l, m, n, p, "black"); l = jd; m = d + 10; n = wb; p = d + 10; y(l, m, n, p, "black"); l = fa; m = d + 40 - 10; n = wb; p = Lc + 40 - 10; y(l, m, n, p, "black"); l = H; m = S; n = H + 15; p = S; y(l, m, n, p, "black"); l = wb; m = Lc; n = wb + 15; p = Lc; y(l, m, n, p, "black"); var sd = x.GetRoomLength(), Ed = x.GetRoomHeight(), kd = x.GetDistanceToScreen(), Jd = x.GetPjOrigin(), Kd = x.GetL0AndL5(), xe = x.GetProjectionRay()[0].z, Bd = sd / 1E3, oe = Ed / 1E3, Nd = kd.min /
                                            1E3, Od = kd.max / 1E3, wd = Jd.y / 1E3, Pd = Jd.z / 1E3, xd = Kd.L0 / 1E3, yd = Kd.L5 / 1E3; xe /= 1E3; var Fa = $('input[name="radio_unit"]:checked').val(); if ("ft" == Fa || "inch" == Fa) Bd = z.ConvParameterValueFromMeterToSelectUnit(Bd), oe = z.ConvParameterValueFromMeterToSelectUnit(oe), Nd = z.ConvParameterValueFromMeterToSelectUnit(Nd), Od = z.ConvParameterValueFromMeterToSelectUnit(Od), wd = z.ConvParameterValueFromMeterToSelectUnit(wd), Pd = z.ConvParameterValueFromMeterToSelectUnit(Pd), xd = z.ConvParameterValueFromMeterToSelectUnit(xd), yd = z.ConvParameterValueFromMeterToSelectUnit(yd),
                                                xe = z.ConvParameterValueFromMeterToSelectUnit(xe); var zd = Pd - xe; var ld = Pd + xd; var Cd = ld - yd; var Qd = $("#model_name").val(); if ("PT-CMZ50" == Qd || "PT-CMZ50J" == Qd) { var Ld = x.GetUserAspect(); if (4 == Ld.w && 3 == Ld.h) { var Md = x.GetParamABWide(); 2413 == z.CalcDiagonalFromDiatanceToScreen(kd.min, Md.A, Md.B) && (Cd -= 5E-4) } } var Ad = 1 == k.CheckUltraShortFocusLens() || 1 == k.CheckUltraShortFocusLens() ? Bd - ld : Bd - Pd; var ye = oe - wd, Dd = oe - ye, Ic = ROUNDING_TYPE.number; Bd = z.CalcRoundBySelectUnit(Ic, Bd, G); z.CalcRoundBySelectUnit(Ic, oe, G); Nd = z.CalcRoundBySelectUnit(Ic,
                                                    Nd, G); Od = z.CalcRoundBySelectUnit(Ic, Od, G); z.CalcRoundBySelectUnit(Ic, Pd, G); zd = z.CalcRoundBySelectUnit(Ic, zd, G); ld = z.CalcRoundBySelectUnit(Ic, ld, G); Cd = z.CalcRoundBySelectUnit(Ic, Cd, G); Ad = z.CalcRoundBySelectUnit(Ic, Ad, G); ye = z.CalcRoundBySelectUnit(Ic, ye, G); Dd = z.CalcRoundBySelectUnit(Ic, Dd, G); var ze = $('input[name="radio_lang"]:checked').val(); var va = ib + (Ga - ib) / 2; var wa = g + 22; Jc(Bd + " " + Fa + "(D)", va, wa, "center"); if (k.CheckRearProjectionPJ()) {
                                                        var dd = "PT-CMZ50" == Qd || "PT-CMZ50J" == Qd ? Cd + " " + Fa + "(L1)" : "ja" ==
                                                            ze ? Cd + " " + Fa + "(\u6295\u5199\u8ddd\u96e2 B)" : Cd + " " + Fa + "(Throw distance B)"; va = Wc; wa = Ca - 22; Jc(dd, va, wa, "left")
                                                    } else k.CheckUltraShortFocusLens() ? (va = Wc, wa = Ca - 22, Jc(ld + " " + Fa + "(L2)", va, wa, "left")) : (dd = zd + " " + Fa, va = Wc + (ma - Wc) / 2, wa = Ca - 22, Jc(dd, va, wa, "center")); va = ma + (Dc - ma) / 2; wa = Ca - 22; Jc(Ad + " " + Fa, va, wa, "center"); k.CheckRearProjectionPJ() ? (dd = "PT-CMZ50" == Qd || "PT-CMZ50J" == Qd ? ld + " " + Fa + "(L)" : "ja" == ze ? ld + " " + Fa + "(\u6295\u5199\u8ddd\u96e2 A)" : ld + " " + Fa + "(Throw distance A)", va = td - 22, wa = g + 35, Jc(dd, va, wa, "right")) :
                                                        k.CheckUltraShortFocusLens() ? (va = ma - (ma - qa), wa = g + 40, Jc(Cd + " " + Fa + "(L4)", va, wa, "center")) : (dd = "ja" == ze ? Nd + " " + Fa + "(\u6700\u5c0f)" : Nd + " " + Fa + "(Min)", va = td - 22, wa = g + 35, Jc(dd, va, wa, "right"), dd = "ja" == ze ? Od + " " + Fa + "(\u6700\u5927)" : Od + " " + Fa + "(Max)", va = Fd + 22, wa = g + 35, Jc(dd, va, wa, "left")); va = Ga + 10 + 5; wa = Za + (Hc - Za) / 2; Jc(Dd + " " + Fa + "(H)", va, wa, "left"); va = Ga + 10 + 5; wa = Ca + (Za - Ca) / 2; Jc(ye + " " + Fa + "(H)", va, wa, "left"); var ve = x.GetRoomWidth(), we = x.GetRoomHeight(), Ae = x.GetProjMinMaxWidth(), Be = x.GetProjMinMaxHeight(), Ce =
                                                            x.GetProjectionRay(), Wd = x.GetPjOrigin(), ca = x.GetProjection4Corner(), Xd = x.GetA0AndA3(), ie = x.GetWideScreenSize(), ed = ve / 1E3, md = we / 1E3, Rd = Wd.x / 1E3, pe = Wd.y / 1E3, De = Xd.A0 / 1E3, Ee = Xd.A3 / 1E3, Sd = ie.width / 1E3, Td = ie.height / 1E3, Ud = Ce[Ae.maxLIndex].x / 1E3, Fe = Ce[Ae.maxRIndex].x / 1E3, Ge = Ce[Be.maxUIndex].y / 1E3, Vd = Ce[Be.maxBIndex].y / 1E3, qe = Ae.min / 1E3, re = Ae.max / 1E3, se = Be.min / 1E3, te = Be.max / 1E3; if ($("#pj_place").val() == PJ_PLACE.Desktop) {
                                                                var Sa = ca[0].x / 1E3; var nd = ca[0].y / 1E3; var od = ca[1].x / 1E3; var fd = ca[1].y / 1E3; var pd = ca[2].x /
                                                                    1E3; var Kc = ca[2].y / 1E3; var Rc = ca[3].x / 1E3; var Ta = ca[3].y / 1E3
                                                            } else $("#pj_place").val() == PJ_PLACE.Ceiling ? (Sa = ca[2].x / 1E3, nd = ca[2].y / 1E3, od = ca[3].x / 1E3, fd = ca[3].y / 1E3, pd = ca[0].x / 1E3, Kc = ca[0].y / 1E3, Rc = ca[1].x / 1E3, Ta = ca[1].y / 1E3) : $("#pj_place").val() == PJ_PLACE.PortClock ? (Sa = ca[3].x / 1E3, nd = ca[3].y / 1E3, od = ca[0].x / 1E3, fd = ca[0].y / 1E3, pd = ca[1].x / 1E3, Kc = ca[1].y / 1E3, Rc = ca[2].x / 1E3, Ta = ca[2].y / 1E3) : $("#pj_place").val() == PJ_PLACE.PortUnClock && (Sa = ca[1].x / 1E3, nd = ca[1].y / 1E3, od = ca[2].x / 1E3, fd = ca[2].y / 1E3, pd = ca[3].x /
                                                                1E3, Kc = ca[3].y / 1E3, Rc = ca[0].x / 1E3, Ta = ca[0].y / 1E3); var K = $('input[name="radio_unit"]:checked').val(); if ("ft" == K || "inch" == K) ed = z.ConvParameterValueFromMeterToSelectUnit(ed), md = z.ConvParameterValueFromMeterToSelectUnit(md), Rd = z.ConvParameterValueFromMeterToSelectUnit(Rd), pe = z.ConvParameterValueFromMeterToSelectUnit(pe), De = z.ConvParameterValueFromMeterToSelectUnit(De), Ee = z.ConvParameterValueFromMeterToSelectUnit(Ee), Sd = z.ConvParameterValueFromMeterToSelectUnit(Sd), Td = z.ConvParameterValueFromMeterToSelectUnit(Td),
                                                                    Ud = z.ConvParameterValueFromMeterToSelectUnit(Ud), Fe = z.ConvParameterValueFromMeterToSelectUnit(Fe), Ge = z.ConvParameterValueFromMeterToSelectUnit(Ge), Vd = z.ConvParameterValueFromMeterToSelectUnit(Vd), qe = z.ConvParameterValueFromMeterToSelectUnit(qe), re = z.ConvParameterValueFromMeterToSelectUnit(re), se = z.ConvParameterValueFromMeterToSelectUnit(se), te = z.ConvParameterValueFromMeterToSelectUnit(te), Sa = z.ConvParameterValueFromMeterToSelectUnit(Sa), nd = z.ConvParameterValueFromMeterToSelectUnit(nd), od = z.ConvParameterValueFromMeterToSelectUnit(od),
                                                                    fd = z.ConvParameterValueFromMeterToSelectUnit(fd), pd = z.ConvParameterValueFromMeterToSelectUnit(pd), Kc = z.ConvParameterValueFromMeterToSelectUnit(Kc), Rc = z.ConvParameterValueFromMeterToSelectUnit(Rc), Ta = z.ConvParameterValueFromMeterToSelectUnit(Ta); var Te = ed - Rd, qd = od - Sa, He = pd - Rc, rd = nd - Ta, Ie = fd - Kc, Sc = ed - od, Je = ed - pd, Tc = md - nd, Ke = md - fd, Le = ed - Fe, Me = md - Ge; if ($("#pj_place").val() == PJ_PLACE.Desktop) { var gd = Kc - pe - De; var ue = gd + Ee } else $("#pj_place").val() == PJ_PLACE.Ceiling && (gd = pe - fd - De, ue = gd + Ee); var U = ROUNDING_TYPE.number;
            ed = z.CalcRoundBySelectUnit(U, ed, G); md = z.CalcRoundBySelectUnit(U, md, G); Rd = z.CalcRoundBySelectUnit(U, Rd, G); z.CalcRoundBySelectUnit(U, pe, G); Ud = z.CalcRoundBySelectUnit(U, Ud, G); z.CalcRoundBySelectUnit(U, Fe, G); z.CalcRoundBySelectUnit(U, Ge, G); Vd = z.CalcRoundBySelectUnit(U, Vd, G); qe = z.CalcRoundBySelectUnit(U, qe, G); re = z.CalcRoundBySelectUnit(U, re, G); se = z.CalcRoundBySelectUnit(U, se, G); te = z.CalcRoundBySelectUnit(U, te, G); qd = z.CalcRoundBySelectUnit(U, qd, G); He = z.CalcRoundBySelectUnit(U, He, G); rd = z.CalcRoundBySelectUnit(U,
                rd, G); Ie = z.CalcRoundBySelectUnit(U, Ie, G); Sa = z.CalcRoundBySelectUnit(U, Sa, G); z.CalcRoundBySelectUnit(U, nd, G); z.CalcRoundBySelectUnit(U, od, G); z.CalcRoundBySelectUnit(U, fd, G); z.CalcRoundBySelectUnit(U, pd, G); Kc = z.CalcRoundBySelectUnit(U, Kc, G); Rc = z.CalcRoundBySelectUnit(U, Rc, G); Ta = z.CalcRoundBySelectUnit(U, Ta, G); Sc = z.CalcRoundBySelectUnit(U, Sc, G); Je = z.CalcRoundBySelectUnit(U, Je, G); Tc = z.CalcRoundBySelectUnit(U, Tc, G); Ke = z.CalcRoundBySelectUnit(U, Ke, G); Le = z.CalcRoundBySelectUnit(U, Le, G); Me = z.CalcRoundBySelectUnit(U,
                    Me, G); Te = z.CalcRoundBySelectUnit(U, Te, G); gd = z.CalcRoundBySelectUnit(U, gd, G); ue = z.CalcRoundBySelectUnit(U, ue, G); Sd = z.CalcRoundBySelectUnit(U, Sd, G); Td = z.CalcRoundBySelectUnit(U, Td, G); var Ne = $("#simulation_type").val(), Uc = x.GetPjRot(), je = x.GetScreenCurved(); if (Ne == SIMULATION_TYPE.VerticalAngle && 0 != Uc.x) {
                        if (0 < Tc) { var A = c - 10 - 5; var B = r + (J - r) / 2; C(Tc + " " + K, A, B, "right") } A = c - 10 - 5; B = J + (F - J) / 2; C(rd + " " + K, A, B, "right"); 0 < Ta && (A = c - 10 - 5, B = F + (d - F) / 2, C(Ta + " " + K, A, B, "right")); 0 < Uc.x ? (0 < Sa && (A = c + (I - c) / 2, B = S - 40 + 5, C(Sa +
                            " " + K, A, B, "center")), A = I + (R - I) / 2, B = S - 40 + 5, C(qd + " " + K, A, B, "center"), 0 < Sc && (A = R + (H - R) / 2, B = S - 40 + 5, C(Sc + " " + K, A, B, "center")), A = sa + (Ia - sa) / 2, B = r - 15 + 2, C(He + " " + K, A, B, "center")) : 0 > Uc.x && (0 < Rc && (A = c + (sa - c) / 2, B = S - 40 + 5, C(Rc + " " + K, A, B, "center")), A = sa + (Ia - sa) / 2, B = S - 40 + 5, C(He + " " + K, A, B, "center"), 0 < Je && (A = Ia + (H - Ia) / 2, B = S - 40 + 5, C(Je + " " + K, A, B, "center")), A = I + (R - I) / 2, B = r - 15 + 2, C(qd + " " + K, A, B, "center"))
                    } else if (Ne == SIMULATION_TYPE.HorizontalAngle && 0 != Uc.y) 0 < Sa && (A = c + (I - c) / 2, B = r - 10 - 5, C(Sa + " " + K, A, B, "center")), A = I + (R -
                        I) / 2, B = r - 10 - 5, C(qd + " " + K, A, B, "center"), 0 < Sc && (A = R + (H - R) / 2, B = r - 10 - 5, C(Sc + " " + K, A, B, "center")), 0 < Uc.y ? (0 < Ke && (A = c - 90 + 5, B = r + (ra - r) / 2, C(Ke + " " + K, A, B, "right")), A = c - 90 + 5, B = ra + (Ja - ra) / 2, C(Ie + " " + K, A, B, "right"), 0 < Kc && (A = c - 90 + 5, B = Ja + (d - Ja) / 2, C(Kc + " " + K, A, B, "right")), A = c - 15 + 5 - 2, B = J + (F - J) / 2, C(rd + " " + K, A, B, "right")) : 0 > Uc.y && (0 < Tc && (A = c - 90 + 5, B = r + (J - r) / 2, C(Tc + " " + K, A, B, "right")), A = c - 90 + 5, B = J + (F - J) / 2, C(rd + " " + K, A, B, "right"), 0 < Ta && (A = c - 90 + 5, B = F + (d - F) / 2, C(Ta + " " + K, A, B, "right")), A = c - 15 + 5 - 2, B = ra + (Ja - ra) / 2, C(Ie + " " +
                            K, A, B, "right")); else if (Ne == SIMULATION_TYPE.VerticalCurved && 0 != je) 0 < Tc && (A = c - 10 - 5, B = r + (J - r) / 2, C(Tc + " " + K, A, B, "right")), A = c - 10 - 5, B = J + (F - J) / 2, C(rd + " " + K, A, B, "right"), 0 < Ta && (A = c - 10 - 5, B = F + (d - F) / 2, C(Ta + " " + K, A, B, "right")), 0 < Ud && (A = c + (Yc.x - c) / 2, B = S - 40 + 5, C(Ud + " " + K, A, B, "center")), A = Yc.x + (Zc.x - Yc.x) / 2, B = S - 40 + 5, C(re + " " + K, A, B, "center"), 0 < Le && (A = Zc.x + (H - Zc.x) / 2, B = S - 40 + 5, C(Le + " " + K, A, B, "center")), A = ud.x + (Gd.x - ud.x) / 2, B = r - 15 + 2, C(qe + " " + K, A, B, "center"); else if (Ne == SIMULATION_TYPE.HorizontalCurved && 0 != je) 0 < Sa &&
                                (A = c + (I - c) / 2, B = r - 10 - 5, C(Sa + " " + K, A, B, "center")), A = I + (R - I) / 2, B = r - 10 - 5, C(qd + " " + K, A, B, "center"), 0 < Sc && (A = R + (H - R) / 2, B = r - 10 - 5, C(Sc + " " + K, A, B, "center")), 0 < Me && (A = c - 90 + 5, B = r + ($c.y - r) / 2, C(Me + " " + K, A, B, "right")), A = c - 90 + 5, B = $c.y + (ad.y - $c.y) / 2, C(te + " " + K, A, B, "right"), 0 < Vd && (A = c - 90 + 5, B = ad.y + (d - ad.y) / 2, C(Vd + " " + K, A, B, "right")), A = c - 15 + 5 - 2, B = vd.y + (Hd.y - vd.y) / 2, C(se + " " + K, A, B, "right"); else {
                                    0 < Sa && (A = c + (I - c) / 2, B = r - 10 - 5, C(Sa + " " + K, A, B, "center")); var Ue = .005 <= Math.abs(qd - Sd) ? qd + " " + K : Sd + " " + K; A = I + (R - I) / 2; B = r - 10 - 5; C(Ue,
                                        A, B, "center"); 0 < Sc && (A = R + (H - R) / 2, B = r - 10 - 5, C(Sc + " " + K, A, B, "center")); 0 < Tc && (A = c - 10 - 5, B = r + (J - r) / 2, C(Tc + " " + K, A, B, "right")); Ue = .005 <= Math.abs(rd - Td) ? rd + " " + K : Td + " " + K; A = c - 10 - 5; B = J + (F - J) / 2; C(Ue, A, B, "right"); 0 < Ta && (A = c - 10 - 5, B = F + (d - F) / 2, C(Ta + " " + K, A, B, "right"))
                            } if (1 == k.CheckRearProjectionPJ() && 0 == Uc.x && 0 == Uc.y || 1 == k.CheckUltraShortFocusLens() && 0 == Uc.x && 0 == Uc.y) {
                                var ke = $("#model_name").val(); "PT-CMZ50" == ke || "PT-CMZ50J" == ke ? $("#pj_place").val() == PJ_PLACE.Desktop ? (A = H + 5 - 10, B = xa - 2, C(gd + " " + K + "(H)", A, B, "right")) :
                                    $("#pj_place").val() == PJ_PLACE.Ceiling && (A = H + 5 - 10, B = ya + 12, C(gd + " " + K + "(H)", A, B, "right")) : $("#pj_place").val() == PJ_PLACE.Desktop ? (A = H + 5 - 10, B = xa - 2, C(gd + " " + K + "(A1)", A, B, "right"), A = H + 5 - 10, B = ya + 12, C(ue + " " + K + "(A2)", A, B, "right")) : $("#pj_place").val() == PJ_PLACE.Ceiling && (A = H + 5 - 10, B = ya + 12, C(gd + " " + K + "(A1)", A, B, "right"), A = H + 5 - 10, B = xa - 2, C(ue + " " + K + "(A2)", A, B, "right"))
                            } A = fa + (jd - fa) / 2; B = d + 10 + 12; C(Rd + " " + K, A, B, "center"); A = jd + (wb - jd) / 2; B = d + 10 + 12; C(Te + " " + K, A, B, "center"); A = fa + (wb - fa) / 2; B = d + 40 + 5; C(ed + " " + K + "(W)",
                                A, B, "center"); A = wb + 10 + 5; B = S + (Lc - S) / 2; C(md + " " + K + "(H)", A, B, "left"); u.fillStyle = "blue"; u.beginPath(); u.moveTo(jb, kb); u.lineTo(Pb, Qb); u.lineTo(Rb, Sb); u.lineTo(Tb, Ub); u.lineTo(jb, kb); u.closePath(); u.fill(); u.beginPath(); u.moveTo(Va, Wa); u.lineTo(qa, Xa); u.lineTo(Ya, lb); u.lineTo(mb, nb); u.lineTo(Va, Wa); u.closePath(); u.fill(); u.beginPath(); u.moveTo(ob, pb); u.lineTo(Vb, Wb); u.lineTo(Xb, Yb); u.lineTo(Zb, $b); u.lineTo(ob, pb); u.closePath(); u.fill(); u.beginPath(); u.moveTo(qb, rb); u.lineTo(ac, bc); u.lineTo(sb, cc); u.lineTo(dc,
                                    ec); u.lineTo(qb, rb); u.closePath(); u.fill(); u.beginPath(); u.moveTo(tb, ub); u.lineTo(fc, gc); u.lineTo(vb, hc); u.lineTo(ic, jc); u.lineTo(tb, ub); u.closePath(); u.fill(); w.fillStyle = "blue"; w.beginPath(); w.moveTo(xb, yb); w.lineTo(zb, Ab); w.lineTo(Bb, kc); w.lineTo(lc, mc); w.lineTo(xb, yb); w.closePath(); w.fill(); w.beginPath(); w.moveTo(Cb, Db); w.lineTo(nc, Eb); w.lineTo(oc, pc); w.lineTo(qc, rc); w.lineTo(Cb, Db); w.closePath(); w.fill(); w.beginPath(); w.moveTo(Fb, Gb); w.lineTo(Hb, sc); w.lineTo(tc, uc); w.lineTo(vc, wc); w.lineTo(Fb,
                                        Gb); w.closePath(); w.fill(); w.beginPath(); w.moveTo(Ib, Jb); w.lineTo(xc, yc); w.lineTo(Kb, zc); w.lineTo(Ac, Bc); w.lineTo(Ib, Jb); w.closePath(); w.fill(); w.beginPath(); w.moveTo(Lb, Oa); w.lineTo(Pa, $a); w.lineTo(Ha, xa); w.lineTo(ab, ya); w.lineTo(Lb, Oa); w.closePath(); w.fill(); Qe(); x.GetIsLensShiftArea() ? ($("#sideCurrentValV").css("background-color", "red"), $("#frontCurrentValV").css("background-color", "red"), $("#frontCurrentValH").css("background-color", "red")) : ($("#sideCurrentValV").css("background-color", ""), $("#frontCurrentValV").css("background-color",
                                            ""), $("#frontCurrentValH").css("background-color", ""))
        }; var Ra = function (b, a, c, d, g) { u.beginPath(); u.strokeStyle = g; u.lineWidth = .5; u.moveTo(b, a); u.lineTo(c, d); u.closePath(); u.stroke() }, y = function (b, a, c, d, g) { w.beginPath(); w.strokeStyle = g; w.lineWidth = .5; w.moveTo(b, a); w.lineTo(c, d); w.closePath(); w.stroke() }, Jc = function (b, a, c, d) { u.font = "bold 12px Arial"; u.textAlign = d; u.fillStyle = "black"; u.fillText(b, a, c) }, C = function (b, a, c, d) { w.font = "bold 12px Arial"; w.textAlign = d; w.fillStyle = "black"; w.fillText(b, a, c) }, Qe =
            function () {
                var b = x.GetPjOrigin(), a = x.GetPjBody(), c = x.GetFloor(), d = x.GetCeiling(), g = x.GetLWall(), h = x.GetRWall(), t = x.GetScreen(), u = x.GetProjectionRay(), z = x.GetProjection4Corner(), y = []; y[0] = { x: b.x, y: b.y, z: b.z }; b = []; for (var r = 0; 8 > r; r++)b[r] = { x: a[r].x, y: a[r].y, z: a[r].z }; var k = r = a = 0, E = $('input[name="radio-three"]:checked').val(); "3D" == E ? (a = 45 * Mb, r = 45 * Fc, k = 0) : "top" == E && (a = 90, r = 180, k = -90); a *= Math.PI / 180; r *= Math.PI / 180; k *= Math.PI / 180; var w = Y(c, c.length, a, r, k); var v = Y(d, d.length, a, r, k); var P = Y(g, g.length, a,
                    r, k); var C = Y(h, h.length, a, r, k); var L = Y(t, t.length, a, r, k); var G = Y(u, u.length, a, r, k); var I = Y(z, z.length, a, r, k); E = { minX: 2E5, maxX: -2E5, minY: 2E5, maxY: -2E5 }; E = Q(w, w.length, E.minX, E.maxX, E.minY, E.maxY); E = Q(v, v.length, E.minX, E.maxX, E.minY, E.maxY); E = Q(P, P.length, E.minX, E.maxX, E.minY, E.maxY); E = Q(C, C.length, E.minX, E.maxX, E.minY, E.maxY); E = Q(L, L.length, E.minX, E.maxX, E.minY, E.maxY); E = Q(G, G.length, E.minX, E.maxX, E.minY, E.maxY); E = Q(I, I.length, E.minX, E.maxX, E.minY, E.maxY); w = E.minX; v = E.maxY; P = E.maxX - w; E = v - E.minY; Da =
                        (ia.width - ia.width / 4) / P; Da > ia.height / E && (Da = ia.height / E); Da *= .9; za = -1 * w * Da; Aa = v * Da; za += (ia.width - P * Da) / 2; Aa += (ia.height - E * Da) / 2; cb = pa(y, y.length, a, r, k, ia.height, Da, za, Aa); D = pa(b, b.length, a, r, k, ia.height, Da, za, Aa); ta = pa(c, c.length, a, r, k, ia.height, Da, za, Aa); db = pa(d, d.length, a, r, k, ia.height, Da, za, Aa); eb = pa(g, g.length, a, r, k, ia.height, Da, za, Aa); Ea = pa(h, h.length, a, r, k, ia.height, Da, za, Aa); Qa = pa(t, t.length, a, r, k, ia.height, Da, za, Aa); Mc = pa(u, u.length, a, r, k, ia.height, Da, za, Aa); Ec = pa(z, z.length, a, r, k, ia.height,
                            Da, za, Aa); q.beginPath(); q.fillStyle = "rgba(204,204,204,0.1)"; q.strokeStyle = "black"; q.moveTo(Ea[0].x, Ea[0].y); for (c = 1; c < Ea.length; c++)q.lineTo(Ea[c].x, Ea[c].y); q.lineTo(Ea[0].x, Ea[0].y); q.closePath(); q.fill(); q.stroke(); if (0 > Mb) { q.beginPath(); q.fillStyle = "rgba(204,204,204,0.9)"; q.strokeStyle = "black"; q.moveTo(ta[0].x, ta[0].y); for (c = 1; c < ta.length; c++)q.lineTo(ta[c].x, ta[c].y); q.lineTo(ta[0].x, ta[0].y); q.closePath(); q.fill(); q.stroke() } q.beginPath(); q.fillStyle = "rgba(128,128,128,0.1)"; q.strokeStyle = "black";
                q.moveTo(Qa[0].x, Qa[0].y); for (c = 1; c < Qa.length; c++)q.lineTo(Qa[c].x, Qa[c].y); q.lineTo(Qa[0].x, Qa[0].y); q.closePath(); q.fill(); q.stroke(); q.strokeStyle = "rgba(192,192,0,0.5)"; q.fillStyle = "rgba(255,255,0,0.5)"; q.beginPath(); q.moveTo(Mc[1].x, Mc[1].y); for (c = 2; c < Mc.length; c++)q.lineTo(Mc[c].x, Mc[c].y); q.closePath(); q.fill(); q.stroke(); q.strokeStyle = "rgba(64,220,0,0.8)"; q.beginPath(); q.moveTo(cb[0].x, cb[0].y); q.lineTo(Ec[0].x, Ec[0].y); q.closePath(); q.stroke(); q.beginPath(); q.moveTo(cb[0].x, cb[0].y); q.lineTo(Ec[1].x,
                    Ec[1].y); q.closePath(); q.stroke(); q.beginPath(); q.moveTo(cb[0].x, cb[0].y); q.lineTo(Ec[2].x, Ec[2].y); q.closePath(); q.stroke(); q.beginPath(); q.moveTo(cb[0].x, cb[0].y); q.lineTo(Ec[3].x, Ec[3].y); q.closePath(); q.stroke(); q.strokeStyle = "rgba(255,0,0,0.8)"; q.beginPath(); q.moveTo(cb[0].x, cb[0].y); q.lineTo(Mc[0].x, Mc[0].y); q.closePath(); q.stroke(); q.fillStyle = "rgba(0,0,255,0.7)"; q.beginPath(); q.moveTo(D[1].x, D[1].y); q.lineTo(D[5].x, D[5].y); q.lineTo(D[6].x, D[6].y); q.lineTo(D[2].x, D[2].y); q.closePath(); q.fill();
                q.beginPath(); q.moveTo(D[3].x, D[3].y); q.lineTo(D[2].x, D[2].y); q.lineTo(D[6].x, D[6].y); q.lineTo(D[7].x, D[7].y); q.closePath(); q.fill(); q.beginPath(); q.moveTo(D[0].x, D[0].y); q.lineTo(D[1].x, D[1].y); q.lineTo(D[2].x, D[2].y); q.lineTo(D[3].x, D[3].y); q.closePath(); q.fill(); q.beginPath(); q.moveTo(D[0].x, D[0].y); q.lineTo(D[1].x, D[1].y); q.lineTo(D[5].x, D[5].y); q.lineTo(D[4].x, D[4].y); q.closePath(); q.fill(); q.beginPath(); q.moveTo(D[0].x, D[0].y); q.lineTo(D[4].x, D[4].y); q.lineTo(D[7].x, D[7].y); q.lineTo(D[3].x,
                    D[3].y); q.closePath(); q.fill(); q.beginPath(); q.moveTo(D[4].x, D[4].y); q.lineTo(D[5].x, D[5].y); q.lineTo(D[6].x, D[6].y); q.lineTo(D[7].x, D[7].y); q.closePath(); q.fill(); q.beginPath(); q.fillStyle = "rgba(204,204,204,0.1)"; q.strokeStyle = "black"; q.moveTo(eb[0].x, eb[0].y); for (c = 1; c < eb.length; c++)q.lineTo(eb[c].x, eb[c].y); q.lineTo(eb[0].x, eb[0].y); q.closePath(); q.fill(); q.stroke(); q.beginPath(); q.strokeStyle = "black"; q.moveTo(db[0].x, db[0].y); for (c = 1; c < db.length; c++)q.lineTo(db[c].x, db[c].y); q.lineTo(db[0].x,
                        db[0].y); q.closePath(); q.stroke(); if (0 <= Mb) { q.beginPath(); q.fillStyle = "rgba(128,128,128,0.9)"; q.strokeStyle = "black"; q.moveTo(ta[0].x, ta[0].y); for (c = 1; c < ta.length; c++)q.lineTo(ta[c].x, ta[c].y); q.lineTo(ta[0].x, ta[0].y); q.closePath(); q.fill(); q.stroke() }
            }, pa = function (b, a, c, d, g, h, t, q, u) { for (var ha = [], r = 0; r < a; r++)ha[r] = z.CalcXYZtoCanvasXY(b[r].x, b[r].y, b[r].z, c, d, g, h, t, q, u); return ha }, Y = function (b, a, c, d, g) { for (var h = [], ha = 0; ha < a; ha++)h[ha] = z.CalcXYZtoCanvasXY(b[ha].x, b[ha].y, b[ha].z, c, d, g, 0, 1, 0, 0); return h },
            Q = function (b, a, c, d, g, h) { for (var ha = 0; ha < a; ha++)c > b[ha].x && (c = b[ha].x), d < b[ha].x && (d = b[ha].x), g > b[ha].y && (g = b[ha].y), h < b[ha].y && (h = b[ha].y); return { minX: c, maxX: d, minY: g, maxY: h } }; O.DrawController = function () {
                t.clearRect(0, 0, da.width, da.height); var b = x.GetPjOrigin(), a = x.GetPjBody(), c = x.GetFloor(), d = x.GetCeiling(), g = x.GetLWall(), h = x.GetRWall(), q = x.GetScreen(), u = x.GetProjectionRay(), r = x.GetProjection4Corner(), y = []; y[0] = { x: b.x, y: b.y, z: b.z }; b = []; for (var k = 0; 8 > k; k++)b[k] = { x: a[k].x, y: a[k].y, z: a[k].z }; k = [[],
                [], [], [], [], []]; var w = [[], [], [], [], [], []]; a = Math.PI / 180 * -30; var E = Math.PI / 180 * -20; var C = Math.PI / 180 * 10; var v = $("#simulation_type").val(); var P = x.GetScreenCurved(); if (v == SIMULATION_TYPE.VerticalCurved && 0 != P) { v = (c[1].x - c[0].x) / 3; P = (g[16].y - g[0].y) / 3; var D = (c[2].z - c[1].z) / 3 } else v == SIMULATION_TYPE.HorizontalCurved && 0 != P ? (v = (c[16].x - c[0].x) / 3, P = (g[1].y - g[0].y) / 3, D = (c[17].z - c[16].z) / 3) : (v = (c[1].x - c[0].x) / 3, P = (g[1].y - g[0].y) / 3, D = (c[2].z - c[1].z) / 3); v < P && (v = P); v < D && (v = D); P = GetDevice(); if (P == _deviceType.iPhone ||
                    P == _deviceType.AndroidMobile) v *= 2; P = v / 6; D = v / 5; _coordinateConeObject = z.CalcTriangleCone(v, 0, P, D); _coordinateColumnObject = z.CalcColumn(v - P, P + P, P, D / 2); P = Y(c, c.length, a, E, C); D = Y(d, d.length, a, E, C); var G = Y(g, g.length, a, E, C); var I = Y(h, h.length, a, E, C); var J = Y(q, q.length, a, E, C); var O = Y(u, u.length, a, E, C); var N = Y(r, r.length, a, E, C); k[0] = Y(_coordinateConeObject[0], _coordinateConeObject[0].length, a, E, C); k[1] = Y(_coordinateConeObject[1], _coordinateConeObject[1].length, a, E, C); k[2] = Y(_coordinateConeObject[2], _coordinateConeObject[2].length,
                        a, E, C); k[3] = Y(_coordinateConeObject[3], _coordinateConeObject[3].length, a, E, C); k[4] = Y(_coordinateConeObject[4], _coordinateConeObject[4].length, a, E, C); k[5] = Y(_coordinateConeObject[5], _coordinateConeObject[5].length, a, E, C); w[0] = Y(_coordinateColumnObject[0], _coordinateColumnObject[0].length, a, E, C); w[1] = Y(_coordinateColumnObject[1], _coordinateColumnObject[1].length, a, E, C); w[2] = Y(_coordinateColumnObject[2], _coordinateColumnObject[2].length, a, E, C); w[3] = Y(_coordinateColumnObject[3], _coordinateColumnObject[3].length,
                            a, E, C); w[4] = Y(_coordinateColumnObject[4], _coordinateColumnObject[4].length, a, E, C); w[5] = Y(_coordinateColumnObject[5], _coordinateColumnObject[5].length, a, E, C); v = { minX: 2E5, maxX: -2E5, minY: 2E5, maxY: -2E5 }; v = Q(P, P.length, v.minX, v.maxX, v.minY, v.maxY); v = Q(D, D.length, v.minX, v.maxX, v.minY, v.maxY); v = Q(G, G.length, v.minX, v.maxX, v.minY, v.maxY); v = Q(I, I.length, v.minX, v.maxX, v.minY, v.maxY); v = Q(J, J.length, v.minX, v.maxX, v.minY, v.maxY); v = Q(O, O.length, v.minX, v.maxX, v.minY, v.maxY); v = Q(N, N.length, v.minX, v.maxX, v.minY, v.maxY);
                v = Q(k[0], k[0].length, v.minX, v.maxX, v.minY, v.maxY); v = Q(k[1], k[1].length, v.minX, v.maxX, v.minY, v.maxY); v = Q(k[2], k[2].length, v.minX, v.maxX, v.minY, v.maxY); v = Q(k[3], k[3].length, v.minX, v.maxX, v.minY, v.maxY); v = Q(k[4], k[4].length, v.minX, v.maxX, v.minY, v.maxY); v = Q(k[5], k[5].length, v.minX, v.maxX, v.minY, v.maxY); v = Q(w[0], w[0].length, v.minX, v.maxX, v.minY, v.maxY); v = Q(w[1], w[1].length, v.minX, v.maxX, v.minY, v.maxY); v = Q(w[2], w[2].length, v.minX, v.maxX, v.minY, v.maxY); v = Q(w[3], w[3].length, v.minX, v.maxX, v.minY, v.maxY); v =
                    Q(w[4], w[4].length, v.minX, v.maxX, v.minY, v.maxY); v = Q(w[5], w[5].length, v.minX, v.maxX, v.minY, v.maxY); k = v.minX; w = v.maxY; P = v.maxX - k; D = w - v.minY; ja = (da.width - da.width / 3) / P; ja > da.height / D && (ja = da.height / D); Ka = -1 * k * ja; na = w * ja; Ka += (da.width - P * ja) / 2; for (na += (da.height - D * ja) / 2; ;) {
                        Cc = pa(y, y.length, a, E, C, da.height, ja, Ka, na); L = pa(b, b.length, a, E, C, da.height, ja, Ka, na); ka = pa(c, c.length, a, E, C, da.height, ja, Ka, na); Ba = pa(d, d.length, a, E, C, da.height, ja, Ka, na); fb = pa(g, g.length, a, E, C, da.height, ja, Ka, na); Nc = pa(h, h.length, a,
                            E, C, da.height, ja, Ka, na); Oc = pa(q, q.length, a, E, C, da.height, ja, Ka, na); Pc = pa(u, u.length, a, E, C, da.height, ja, Ka, na); La = pa(r, r.length, a, E, C, da.height, ja, Ka, na); k = a; w = E; P = C; D = ja; G = Ka; I = na; J = [[], [], [], [], [], []]; O = [[], [], [], [], [], []]; for (var H = 0, R = _coordinateConeObject.length; H < R; H++)for (var F = 0, e = _coordinateConeObject[H].length; F < e; F++)N = pa(_coordinateConeObject[H][F], _coordinateConeObject[H][F].length, k, w, P, da.height, D, G, I), J[H].push([{ x: N[0].x, y: N[0].y }, { x: N[1].x, y: N[1].y }, { x: N[2].x, y: N[2].y }]); T = J; H = 0;
                        for (R = _coordinateColumnObject.length; H < R; H++)for (F = 0, e = _coordinateColumnObject[H].length; F < e; F++)N = pa(_coordinateColumnObject[H][F], _coordinateColumnObject[H][F].length, k, w, P, da.height, D, G, I), O[H].push([{ x: N[0].x, y: N[0].y }, { x: N[1].x, y: N[1].y }, { x: N[2].x, y: N[2].y }, { x: N[3].x, y: N[3].y }]); la = O; lf(!1); w = 1; k = 0; for (P = Nb.length; k < P; k++)Nb[k].maxY >= da.height && (w = 0), Nb[k].maxX >= da.width && (w = 0); if (w) { lf(!0); break } ja *= .9; k = v.minX; w = v.maxX; P = v.minY; D = v.maxY; Ka = -1 * k * ja; na = D * ja; Ka += (da.width - (w - k) * ja) / 2; na += (da.height -
                            (D - P) * ja) / 2
                    }
            }; var lf = function (b) {
                if (b) { t.beginPath(); t.fillStyle = "rgba(204,204,204,0.1)"; t.strokeStyle = "black"; t.moveTo(Nc[0].x, Nc[0].y); for (var a = 1; a < Nc.length; a++)t.lineTo(Nc[a].x, Nc[a].y); t.lineTo(Nc[0].x, Nc[0].y); t.closePath(); t.fill(); t.stroke() } if (b) { t.beginPath(); t.fillStyle = "rgba(204,204,204,0.9)"; t.strokeStyle = "black"; t.moveTo(ka[0].x, ka[0].y); for (a = 1; a < ka.length; a++)t.lineTo(ka[a].x, ka[a].y); t.lineTo(ka[0].x, ka[0].y); t.closePath(); t.fill(); t.stroke() } if (b) {
                    t.beginPath(); t.fillStyle = "rgba(128,128,128,0.1)";
                    t.strokeStyle = "black"; t.moveTo(Oc[0].x, Oc[0].y); for (a = 1; a < Oc.length; a++)t.lineTo(Oc[a].x, Oc[a].y); t.lineTo(Oc[0].x, Oc[0].y); t.closePath(); t.fill(); t.stroke()
                } if (b) { t.strokeStyle = "rgba(192,192,0,0.5)"; t.fillStyle = "rgba(255,255,0,0.5)"; t.beginPath(); t.moveTo(Pc[1].x, Pc[1].y); for (a = 2; a < Pc.length; a++)t.lineTo(Pc[a].x, Pc[a].y); t.closePath(); t.fill(); t.stroke() } b && (t.strokeStyle = "rgba(64,220,0,0.8)", t.beginPath(), t.moveTo(Cc[0].x, Cc[0].y), t.lineTo(La[0].x, La[0].y), t.moveTo(Cc[0].x, Cc[0].y), t.lineTo(La[1].x,
                    La[1].y), t.moveTo(Cc[0].x, Cc[0].y), t.lineTo(La[2].x, La[2].y), t.moveTo(Cc[0].x, Cc[0].y), t.lineTo(La[3].x, La[3].y), t.closePath(), t.stroke(), t.strokeStyle = "rgba(255,0,0,0.8)", t.beginPath(), t.moveTo(Cc[0].x, Cc[0].y), t.lineTo(Pc[0].x, Pc[0].y), t.closePath(), t.stroke()); b && (t.fillStyle = "rgba(0,0,255,0.7)", t.beginPath(), t.moveTo(L[1].x, L[1].y), t.lineTo(L[5].x, L[5].y), t.lineTo(L[6].x, L[6].y), t.lineTo(L[2].x, L[2].y), t.closePath(), t.fill(), t.beginPath(), t.moveTo(L[3].x, L[3].y), t.lineTo(L[2].x, L[2].y), t.lineTo(L[6].x,
                        L[6].y), t.lineTo(L[7].x, L[7].y), t.closePath(), t.fill(), t.beginPath(), t.moveTo(L[0].x, L[0].y), t.lineTo(L[1].x, L[1].y), t.lineTo(L[2].x, L[2].y), t.lineTo(L[3].x, L[3].y), t.closePath(), t.fill(), t.beginPath(), t.moveTo(L[0].x, L[0].y), t.lineTo(L[1].x, L[1].y), t.lineTo(L[5].x, L[5].y), t.lineTo(L[4].x, L[4].y), t.closePath(), t.fill(), t.beginPath(), t.moveTo(L[0].x, L[0].y), t.lineTo(L[4].x, L[4].y), t.lineTo(L[7].x, L[7].y), t.lineTo(L[3].x, L[3].y), t.closePath(), t.fill(), t.beginPath(), t.moveTo(L[4].x, L[4].y), t.lineTo(L[5].x,
                            L[5].y), t.lineTo(L[6].x, L[6].y), t.lineTo(L[7].x, L[7].y), t.closePath(), t.fill()); if (b) { t.beginPath(); t.fillStyle = "rgba(204,204,204,0.1)"; t.strokeStyle = "black"; t.moveTo(fb[0].x, fb[0].y); for (a = 1; a < fb.length; a++)t.lineTo(fb[a].x, fb[a].y); t.lineTo(fb[0].x, fb[0].y); t.closePath(); t.fill(); t.stroke() } if (b) { t.beginPath(); t.strokeStyle = "black"; t.moveTo(Ba[0].x, Ba[0].y); for (a = 1; a < Ba.length; a++)t.lineTo(Ba[a].x, Ba[a].y); t.lineTo(Ba[0].x, Ba[0].y); t.closePath(); t.stroke() } var c = [], d = [], g = []; a = 0; for (var h = T.length; a <
                                h; a++)if (0 == a) { var k = { minX: 2E5, maxX: -2E5, minY: 2E5, maxY: -2E5 }; for (var q = 0, u = T[a].length; q < u; q++)k = Q(T[0][q], T[0][q].length, k.minX, k.maxX, k.minY, k.maxY), k = Q(T[3][q], T[3][q].length, k.minX, k.maxX, k.minY, k.maxY); c.push((k.maxX - k.minX) / 2); d.push((k.maxY - k.minY) / 2) } else if (1 == a) {
                                    k = { minX: 2E5, maxX: -2E5, minY: 2E5, maxY: -2E5 }; q = 0; for (u = T[a].length; q < u; q++)k = Q(T[1][q], T[1][q].length, k.minX, k.maxX, k.minY, k.maxY), k = Q(T[4][q], T[4][q].length, k.minX, k.maxX, k.minY, k.maxY); c.push((k.maxX - k.minX) / 2); d.push((k.maxY - k.minY) /
                                        2)
                                } else if (2 == a) { k = { minX: 2E5, maxX: -2E5, minY: 2E5, maxY: -2E5 }; q = 0; for (u = T[a].length; q < u; q++)k = Q(T[2][q], T[2][q].length, k.minX, k.maxX, k.minY, k.maxY), k = Q(T[5][q], T[5][q].length, k.minX, k.maxX, k.minY, k.maxY); c.push((k.maxX - k.minX) / 2); d.push((k.maxY - k.minY) / 2) } a = $("#simulation_type").val(); var r = x.GetScreenCurved(); if (a == SIMULATION_TYPE.HorizontalCurved && 0 != r) { var w = ka[0].x; var y = ka[0].y; var z = ka[17].x; var C = ka[17].y; var v = ka[18].x; var D = ka[18].y; var G = Ba[16].x; var H = Ba[16].y; var I = Ba[17].x; var J = Ba[17].y } else w =
                                    ka[0].x, y = ka[0].y, z = ka[2].x, C = ka[2].y, v = ka[3].x, D = ka[3].y, G = Ba[1].x, H = Ba[1].y, I = Ba[2].x, J = Ba[2].y; a = 0; for (h = T.length; a < h; a++) { k = { minX: 2E5, maxX: -2E5, minY: 2E5, maxY: -2E5 }; q = 0; for (u = T[a].length; q < u; q++)k = Q(T[a][q], T[a][q].length, k.minX, k.maxX, k.minY, k.maxY); g.push({ minX: k.minX, maxX: k.maxX, minY: k.minY, maxY: k.maxY }) } a = 0; for (h = la.length; a < h; a++) {
                                        if (0 == a || 3 == a) { var F = v + (z - v) / 2 - w - c[0]; var N = D + (C - D) / 2 - y + 30 } else 1 == a || 4 == a ? (F = z - w - (z - I) / 2 + c[1] + 10, N = C - y - (C - J) / 2 + d[1]) : (F = G - w + (I - G) / 2 - c[2] + 30, N = H - y + (J - H) / 2 - d[2]);
                                        k = { minX: g[a].minX, maxX: g[a].maxX, minY: g[a].minY, maxY: g[a].maxY }; q = 0; for (u = la[a].length; q < u; q++)k = Q(la[a][q], la[a][q].length, k.minX, k.maxX, k.minY, k.maxY); g[a] = { minX: k.minX + F, maxX: k.maxX + F, minY: k.minY + N, maxY: k.maxY + N }
                                    } g[0].maxX >= g[1].minX && (c[1] = c[1] + (g[0].maxX - g[1].minX) + 20); g[2].maxX >= g[1].minX && (c[1] = c[1] + (g[2].maxX - g[1].minX) + 20); 0 > g[5].minY && (d[2] = d[2] + g[5].minY - 5); a = 0; for (h = T.length; a < h; a++) {
                                        r = b; 0 == a || 3 == a ? ($("#lock_posH").prop("checked") && (r = !1), r && (t.strokeStyle = "red"), F = v + (z - v) / 2 - w - c[0], N =
                                            D + (C - D) / 2 - y + 30) : 1 == a || 4 == a ? ($("#lock_posV").prop("checked") && (r = !1), r && (t.strokeStyle = "green"), F = z - w - (z - I) / 2 + c[1] + 10, N = C - y - (C - J) / 2 + d[1]) : ($("#lock_dist").prop("checked") && (r = !1), r && (t.strokeStyle = "blue"), F = G - w + (I - G) / 2 - c[2] + 30, N = H - y + (J - H) / 2 - d[2]); k = { minX: 2E5, maxX: -2E5, minY: 2E5, maxY: -2E5 }; r && t.beginPath(); q = 0; for (u = T[a].length; q < u; q++)r && (t.moveTo(T[a][q][0].x + F, T[a][q][0].y + N), t.lineTo(T[a][q][1].x + F, T[a][q][1].y + N), t.lineTo(T[a][q][2].x + F, T[a][q][2].y + N), t.lineTo(T[a][q][0].x + F, T[a][q][0].y + N)), k =
                                                Q(T[a][q], T[a][q].length, k.minX, k.maxX, k.minY, k.maxY); r && (t.closePath(), t.stroke()); g[a] = { minX: k.minX, maxX: k.maxX, minY: k.minY, maxY: k.maxY }
                                    } a = 0; for (h = la.length; a < h; a++) {
                                        r = b; 0 == a || 3 == a ? ($("#lock_posH").prop("checked") && (r = !1), r && (t.strokeStyle = "red"), F = v + (z - v) / 2 - w - c[0], N = D + (C - D) / 2 - y + 30) : 1 == a || 4 == a ? ($("#lock_posV").prop("checked") && (r = !1), r && (t.strokeStyle = "green"), F = z - w - (z - I) / 2 + c[1] + 10, N = C - y - (C - J) / 2 + d[1]) : ($("#lock_dist").prop("checked") && (r = !1), r && (t.strokeStyle = "blue"), F = G - w + (I - G) / 2 - c[2] + 30, N = H - y +
                                            (J - H) / 2 - d[2]); k = { minX: g[a].minX, maxX: g[a].maxX, minY: g[a].minY, maxY: g[a].maxY }; r && t.beginPath(); q = 0; for (u = la[a].length; q < u; q++)r && (t.moveTo(la[a][q][0].x + F, la[a][q][0].y + N), t.lineTo(la[a][q][1].x + F, la[a][q][1].y + N), t.lineTo(la[a][q][2].x + F, la[a][q][2].y + N), t.lineTo(la[a][q][3].x + F, la[a][q][3].y + N), t.lineTo(la[a][q][0].x + F, la[a][q][0].y + N)), k = Q(la[a][q], la[a][q].length, k.minX, k.maxX, k.minY, k.maxY); r && (t.closePath(), t.stroke()); g[a] = { minX: k.minX + F, maxX: k.maxX + F, minY: k.minY + N, maxY: k.maxY + N }
                                    } Nb = g
            }, Dd =
                    function (a) {
                        var b = x.GetPjOrigin(), c = b.x, d = b.y; b = b.z; 1 == cd ? $("#lock_posH").prop("checked") || (c = O.ClipPjControlX(c + a), x.SetPjOriginX(c)) : 2 == cd ? $("#lock_posV").prop("checked") || (d = O.ClipPjControlY(d + a), x.SetPjOriginY(d)) : 3 == cd ? $("#lock_dist").prop("checked") || ($("#lock_size").prop("checked") ? kd(d, b + a) : (b = O.ClipPjControlZ(b + a), x.SetPjOriginZ(b))) : 4 == cd ? $("#lock_posH").prop("checked") || (c = O.ClipPjControlX(c - a), x.SetPjOriginX(c)) : 5 == cd ? $("#lock_posV").prop("checked") || (d = O.ClipPjControlY(d - a), x.SetPjOriginY(d)) :
                            $("#lock_dist").prop("checked") || ($("#lock_size").prop("checked") ? kd(d, b - a) : (b = O.ClipPjControlZ(b - a), x.SetPjOriginZ(b)))
                    }, sf = function (a) { a.preventDefault(); var b = 1 == a.which ? !0 : !1, c = document.getElementById("controller").getBoundingClientRect().left, d = document.getElementById("controller").getBoundingClientRect().top; a = Ad(a.clientX - c, a.clientY - d); b && a && (bd = !0, cd = a, Gc = 1, Dd(10), k.SetPjOrigin(), k.NoSetAppDataCalcAndDraw(), O.DrawController(), setTimeout(Ed, 25)) }, tf = function (a) {
                        a.preventDefault(); var b = document.getElementById("controller").getBoundingClientRect().left,
                            c = document.getElementById("controller").getBoundingClientRect().top; Ad(a.clientX - b, a.clientY - c) ? $("#controller").css("cursor", "pointer") : a.buttons & 1 || $("#controller").css("cursor", "auto")
                    }, Gf = function (a) {
                        a.preventDefault(); var b = document.getElementById("controller").getBoundingClientRect().left, c = document.getElementById("controller").getBoundingClientRect().top; if (a = Ad(a.touches[0].clientX - b, a.touches[0].clientY - c)) bd = !0, cd = a, Gc = 1, Dd(10), k.SetPjOrigin(), k.NoSetAppDataCalcAndDraw(), O.DrawController(),
                            setTimeout(Ed, 25)
                    }, Ed = function () { if (bd) { 100 > Gc && Gc++; if (!(10 > Gc)) { var a = 10; 40 <= Gc && (a = 20); 100 <= Gc && (a = 40); Dd(a); k.SetPjOrigin(); k.NoSetAppDataCalcAndDraw(); O.DrawController() } setTimeout(Ed, 25) } }, df = function () { bd = !1; clearTimeout(Ed) }, ef = function () { bd = !1; clearTimeout(Ed) }; return $e
}();
